(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(6209)}])},6209:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return M}});var t=a(5893),r=a(9008),l=a.n(r),n=a(7294),i=a(1163),d=a(1891),o=a(7874),c=a(6518),m=a(9249),x=a(8088),g=a(5197),h=a(5482),u=a(666),y=a(3552),p=a(3785),b=a(6582),w=a(6090);let j="2025-07-25",k="2026-01-13",N="https://alpha.showdown.game/",v=e=>{if(!e)return"";let s=e.trim(),a=s.indexOf("#");return -1===a?s:s.slice(0,a)};function f(e){let s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(t)}function C(e){if(!e)return null;let s=e.trim(),a=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(s);return a?{y:Number(a[1]),m:Number(a[2]),d:Number(a[3])}:(a=/^([0-9]{2})\.([0-9]{2})\.([0-9]{4})$/.exec(s))?{y:Number(a[3]),m:Number(a[2]),d:Number(a[1])}:(a=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(s))?{y:Number(a[3]),m:Number(a[1]),d:Number(a[2])}:null}function S(e){let s=C(e);if(!s)return e||"";let a=new Date(s.y,s.m-1,s.d);if(isNaN(a.getTime()))return e||"";let t=a.toLocaleString("en-US",{month:"short"}),r=String(s.y).slice(-2);return"".concat(t," ").concat(s.d," ").concat(r)}function M(){let e=(0,i.useRouter)(),[s,a]=(0,n.useState)(k),[r,w]=(0,n.useState)(""),[M,T]=(0,n.useState)("barry"),[_,D]=(0,n.useState)("light"),A=(0,n.useRef)(!1),[R,E]=(0,n.useState)(!1),[Z,O]=(0,n.useState)(null),[U,W]=(0,n.useState)(null),[Y,F]=(0,n.useState)([]),[H,G]=(0,n.useState)(!0),[J,I]=(0,n.useState)([]),[B,$]=(0,n.useState)({key:"total",dir:"desc"}),[z,q]=(0,n.useState)(!1),[V,X]=(0,n.useState)(!1),[K,Q]=(0,n.useState)(null),[ee,es]=(0,n.useState)(!1),[ea,et]=(0,n.useState)([]),[er,el]=(0,n.useState)(new Set),[en,ei]=(0,n.useState)(new Set),[ed,eo]=(0,n.useState)(null),[ec,em]=(0,n.useState)(null),[ex,eg]=(0,n.useState)("");(0,n.useEffect)(()=>{try{let e=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a="dark"===e||!e&&s?"dark":"light";D(a),"undefined"!=typeof document&&document.documentElement.classList.toggle("dark","dark"===a);let t=localStorage.getItem("recentPlayers");t&&et(JSON.parse(t))}catch(e){}},[]),(0,n.useEffect)(()=>{try{"undefined"!=typeof document&&document.documentElement.classList.toggle("dark","dark"===_),localStorage.setItem("theme",_)}catch(e){}},[_]),(0,n.useEffect)(()=>{if(A.current||!e.isReady)return;let s=e.query,t="string"==typeof s.start?s.start:void 0,r="string"==typeof s.end?s.end:void 0,l="string"==typeof s.player?s.player:void 0,n="string"==typeof s.only?s.only:void 0,i="string"==typeof s.theme?s.theme:void 0,d="string"==typeof s.compare?s.compare:void 0;t&&a(t),r&&w(r),l&&T(l),"1"===n&&G(!0),"dark"===i&&D("dark"),d&&eg(d),A.current=!0},[e.isReady]),(0,n.useEffect)(()=>{if(!A.current)return;let a={};s&&(a.start=s),r&&(a.end=r),M&&(a.player=M),H&&(a.only="1"),"dark"===_&&(a.theme="dark"),ex.trim()&&(a.compare=ex.trim()),e.replace({pathname:e.pathname,query:a},void 0,{shallow:!0})},[s,r,M,ex,H,_]);let eh=(0,n.useMemo)(()=>Y.filter(e=>"win"===(e.endReason||"").trim().toLowerCase()),[Y]),eu=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase(),s=eh.filter(s=>{var a,t;return(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e}),a=eh.filter(s=>{var a,t;return(null===(t=s.losingPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e}),t=s.length,r=a.length,l=t+r,n=new Map;for(let e of s){var i;let s=(null!==(i=e.winningClasses)&&void 0!==i?i:"").trim();s&&n.set(s,(n.get(s)||0)+1)}let d=null,o=0;for(let[e,s]of n.entries())s>o&&(d=e,o=s);let c=t?o/t:0;return{wins:t,losses:r,total:l,winrate:l?t/l:0,dominantClass:d,dominantClassPct:c}},[eh,M]),ey=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase();return Y.filter(s=>{var a,t,r,l;return(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e||(null===(l=s.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e}).map(s=>{var a,t,r,l,n,i;return{...s,result:(()=>{var a,t;let r=(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e,l=(s.endReason||"").toLowerCase().includes("timeout"),n=r?"Win":"Loss";return l?n+" Timeout":n})(),opponent:(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e?s.losingPlayer:s.winningPlayer,playerClasses:(null===(l=s.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e?s.winningClasses:s.losingClasses,opponentClasses:(null===(i=s.winningPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase())===e?s.losingClasses:s.winningClasses}}).sort((e,s)=>s.blockNumber-e.blockNumber)},[Y,M]),ep=(0,n.useMemo)(()=>{let e=ex.trim().toLowerCase();if(!e)return null;let s=eh.filter(s=>{var a,t;return(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e}),a=eh.filter(s=>{var a,t;return(null===(t=s.losingPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e}),t=s.length,r=a.length,l=t+r;return{wins:t,losses:r,total:l,winrate:l?t/l:0}},[eh,ex]),eb=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase(),s=ex.trim().toLowerCase();if(!e||!s)return null;let a=0,t=0;for(let d of eh){var r,l,n,i;let o=null===(l=d.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase(),c=null===(i=d.losingPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase();o===e&&c===s?a++:o===s&&c===e&&t++}return{p1Wins:a,p2Wins:t,total:a+t}},[eh,M,ex]),[ew,ej]=(0,n.useState)(1),[ek,eN]=(0,n.useState)(1),[ev,ef]=(0,n.useState)(5),[eC,eS]=(0,n.useState)(""),[eM,eL]=(0,n.useState)(""),[eP,eT]=(0,n.useState)({key:"startedAt",dir:"desc"}),[e_,eD]=(0,n.useState)({key:"startedAt",dir:"desc"}),[eA,eR]=(0,n.useState)({key:"winrate",dir:"desc"}),[eE,eZ]=(0,n.useState)({key:"total",dir:"desc"}),eO=(0,n.useMemo)(()=>{let e=Y.slice();return e.sort((e,s)=>{let a=eP.key,t=e[a],r=s[a];if("startedAt"===a){let e=e=>{if(!e)return 0;let s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(s)return Math.floor(Date.UTC(Number(s[1]),Number(s[2])-1,Number(s[3]),Number(s[4]),Number(s[5]),Number(s[6]))/1e3);let a=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(a)?0:Math.floor(a/1e3)};t=e(t),r=e(r)}let l=t<r?-1:t>r?1:0;return"asc"===eP.dir?l:-l}),e},[Y,eP]),eU=(0,n.useMemo)(()=>{let e=(ew-1)*ev;return eO.slice(e,e+ev)},[eO,ew,ev]),eW=(0,n.useMemo)(()=>{let e=ey.slice();return e.sort((e,s)=>{let a=e_.key,t=e[a],r=s[a];if("startedAt"===a){let e=e=>{if(!e)return 0;let s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(s)return Math.floor(Date.UTC(Number(s[1]),Number(s[2])-1,Number(s[3]),Number(s[4]),Number(s[5]),Number(s[6]))/1e3);let a=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(a)?0:Math.floor(a/1e3)};t=e(t),r=e(r)}let l=t<r?-1:t>r?1:0;return"asc"===e_.dir?l:-l}),e},[ey,e_]),eY=(0,n.useMemo)(()=>{let e=(ek-1)*ev;return eW.slice(e,e+ev)},[eW,ek,ev]);(0,n.useEffect)(()=>{ej(1)},[Y,ev]),(0,n.useEffect)(()=>{eN(1)},[ey,ev]),(0,n.useEffect)(()=>{let e=e=>{var s,a;(null===(s=e.target)||void 0===s?void 0:s.tagName)!=="INPUT"&&(null===(a=e.target)||void 0===a?void 0:a.tagName)!=="TEXTAREA"&&("ArrowRight"===e.key&&ej(e=>Math.min(Math.ceil(Y.length/ev)||1,e+1)),"ArrowLeft"===e.key&&ej(e=>Math.max(1,e-1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Y,ev]),(0,n.useEffect)(()=>{let e=()=>es(window.scrollY>400);return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]);let eF=async e=>{try{await navigator.clipboard.writeText(e),Q(e),setTimeout(()=>Q(null),1200)}catch(e){}},eH=e=>{el(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},eG=e=>{ei(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},eJ=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase(),s=new Map;for(let d of eh){var a,t,r,l,n,i;if((null===(t=d.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e){let e=(null!==(n=d.winningClasses)&&void 0!==n?n:"").trim()||"(unknown)",a=s.get(e)||{wins:0,losses:0,total:0};a.wins+=1,a.total+=1,s.set(e,a)}else if((null===(l=d.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e){let e=(null!==(i=d.losingClasses)&&void 0!==i?i:"").trim()||"(unknown)",a=s.get(e)||{wins:0,losses:0,total:0};a.losses+=1,a.total+=1,s.set(e,a)}}let d=Array.from(s.entries()).map(e=>{let[s,a]=e;return{klass:s,...a,winrate:a.total?a.wins/a.total:0}});return d.sort((e,s)=>{let a=eE.key,t=eE.dir,r=e[a]<s[a]?-1:e[a]>s[a]?1:0;return"asc"===t?r:-r}),d},[eh,M,eE]),eI=(0,n.useMemo)(()=>{let e=new Map;for(let t of eh){var s,a;let r=(null!==(s=t.winningClasses)&&void 0!==s?s:"").trim(),l=(null!==(a=t.losingClasses)&&void 0!==a?a:"").trim();if(r){let s=e.get(r)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,e.set(r,s)}if(l){let s=e.get(l)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,e.set(l,s)}}let t=Array.from(e.entries()).map(e=>{let[s,a]=e;return{klass:s,...a,winrate:a.total?a.wins/a.total:0}});return t.sort((e,s)=>{let a=eA.key,t=eA.dir,r=e[a]<s[a]?-1:e[a]>s[a]?1:0;return"asc"===t?r:-r}),t},[eh,eA]);function eB(e){if(!e)return null;let s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(s)return Math.floor(Date.UTC(+s[1],+s[2]-1,+s[3],+s[4],+s[5],+s[6])/1e3);let a=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(a)?null:Math.floor(a/1e3)}let e$=(0,n.useMemo)(()=>{let e=new Set;for(let s of eh){let a=eB(s.startedAt);null!=a&&e.add(Math.floor(a/86400))}return Array.from(e).sort((e,s)=>e-s)},[eh]),ez=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase(),s=new Set;for(let n of eh){var a,t,r,l;if((null===(t=n.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())!==e&&(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())!==e)continue;let i=eB(n.startedAt);null!=i&&s.add(Math.floor(i/86400))}return Array.from(s).sort((e,s)=>e-s)},[eh,M]);function eq(e,s,a){let t=new Map;a.forEach((e,s)=>t.set(e,s));let r=new Map(s.map(e=>[e,Array(a.length).fill(0)]));for(let s of e){let e=eB(s.startedAt);if(null==e)continue;let a=Math.floor(e/86400),l=t.get(a);if(null==l)continue;let n=(s.winningClasses||"").trim(),i=(s.losingClasses||"").trim();n&&r.has(n)&&(r.get(n)[l]+=1),i&&r.has(i)&&(r.get(i)[l]+=1)}return r}let eV=(0,n.useMemo)(()=>eq(eh,eI.map(e=>e.klass),e$),[eh,eI,e$]),eX=(0,n.useMemo)(()=>{let e=M.trim().toLowerCase();return eh.filter(s=>{var a,t,r,l;return(null===(t=s.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e||(null===(l=s.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e})},[eh,M]),eK=(0,n.useMemo)(()=>eq(eX,eJ.map(e=>e.klass),ez),[eX,eJ,ez]);function eQ(e){let{data:s}=e,a=Math.max(1,...s),r=s.length>1?60/(s.length-1):60,l=s.map((e,s)=>"".concat(s*r,",").concat(14-e/a*14)).join(" ");return(0,t.jsx)("svg",{width:60,height:14,"aria-hidden":"true",children:(0,t.jsx)("polyline",{points:l,fill:"none",stroke:"currentColor",strokeWidth:"1",opacity:.6})})}(0,n.useEffect)(()=>{if(!H)return;let e=M.trim().toLowerCase();if(!e)return;let s=new Map;for(let n of eh){var a,t,r,l;let i=(null===(t=n.winningPlayer)||void 0===t?void 0:null===(a=t.trim)||void 0===a?void 0:a.call(t).toLowerCase())===e,d=(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e;if(!i&&!d)continue;let o=((i?n.winningClasses:n.losingClasses)||"").trim();o&&o.includes("/")&&s.set(o,(s.get(o)||0)+1)}let n=null,i=0;for(let[e,a]of s.entries())a>i&&(n=e,i=a);if(!n){I([]);return}let d=n.split("/").map(e=>e.trim()).filter(Boolean);if(2!==d.length){I([]);return}I(d)},[eh,M,H,s,r]);let e0=(0,n.useMemo)(()=>{let e=r||"",a=S(s||j),t=e?S(e):"latest";return"".concat(a," → ").concat(t)},[s,r]),e2=(0,n.useMemo)(()=>{var e,s,a,t,r,l,n;let i=M.trim().toLowerCase(),d=H?eh.filter(e=>{var s,a,t,r;return(null===(a=e.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===i||(null===(r=e.losingPlayer)||void 0===r?void 0:null===(t=r.trim)||void 0===t?void 0:t.call(r).toLowerCase())===i}):eh,o=new Set,c={};for(let t of d){let r=(null!==(e=t.winningClasses)&&void 0!==e?e:"").trim(),l=(null!==(s=t.losingClasses)&&void 0!==s?s:"").trim();r&&l&&r.includes("/")&&l.includes("/")&&(o.add(r),o.add(l),c[r]||(c[r]={}),c[r][l]=(null!==(a=c[r][l])&&void 0!==a?a:0)+1)}let m=Array.from(o).sort(),x={};for(let e of m){let s=[];for(let a of m){if(e===a)continue;let i=null!==(l=null===(t=c[e])||void 0===t?void 0:t[a])&&void 0!==l?l:0,d=null!==(n=null===(r=c[a])||void 0===r?void 0:r[e])&&void 0!==n?n:0,o=i+d;0!==o&&s.push({opponent:a,wins:i,losses:d,total:o,winRate:i/o})}s.sort((e,s)=>s.total-e.total),x[e]=s}return{classes:m,matchups:x}},[eh,M,H]),e1=(0,n.useMemo)(()=>2!==J.length?"":[...J].sort().join("/"),[J]),e5=e=>{I(s=>s.includes(e)?s.filter(s=>s!==e):s.length<2?[...s,e]:[s[1],e])},e4=(0,n.useMemo)(()=>{let e=new Map;for(let t of eh){var s,a;let r=(null!==(s=t.winningPlayer)&&void 0!==s?s:"").trim(),l=(null!==(a=t.losingPlayer)&&void 0!==a?a:"").trim();if(r){let s=r.toLowerCase(),a=e.get(s)||{wins:0,losses:0,total:0};a.wins+=1,a.total+=1,e.set(s,a)}if(l){let s=l.toLowerCase(),a=e.get(s)||{wins:0,losses:0,total:0};a.losses+=1,a.total+=1,e.set(s,a)}}return Array.from(e.entries()).map(e=>{let[s,a]=e;return{player:s,wins:a.wins,losses:a.losses,total:a.total,winrate:a.total?a.wins/a.total:0}}).filter(e=>e.total>=30).sort((e,s)=>s.winrate-e.winrate||s.total-e.total||s.wins-e.wins||e.player.localeCompare(s.player)).slice(0,10)},[eh]),e3=(0,n.useMemo)(()=>{let e=new Map;for(let l of eh){var s,a,t,r;let n=(null!==(s=l.winningClasses)&&void 0!==s?s:"").trim(),i=(null!==(a=l.losingClasses)&&void 0!==a?a:"").trim(),d=(null!==(t=l.winningPlayer)&&void 0!==t?t:"").trim().toLowerCase(),o=(null!==(r=l.losingPlayer)&&void 0!==r?r:"").trim().toLowerCase();if(n&&n.includes("/")&&d){e.has(n)||e.set(n,new Map);let s=e.get(n),a=s.get(d)||{wins:0,losses:0,total:0};a.wins+=1,a.total+=1,s.set(d,a)}if(i&&i.includes("/")&&o){e.has(i)||e.set(i,new Map);let s=e.get(i),a=s.get(o)||{wins:0,losses:0,total:0};a.losses+=1,a.total+=1,s.set(o,a)}}let l=[];for(let[s,a]of e.entries()){let e=null;for(let[s,t]of a.entries()){if(t.total<20)continue;let a=t.wins/t.total;(!e||a>e.winrate||a===e.winrate&&t.total>e.total)&&(e={player:s,wins:t.wins,losses:t.losses,total:t.total,winrate:a})}e&&l.push({klass:s,...e})}return l.sort((e,s)=>s.winrate-e.winrate||s.total-e.total||e.klass.localeCompare(s.klass))},[eh]),e7=e=>{let s=new Date,t=new Date(s.getFullYear(),s.getMonth(),s.getDate());if("today"===e)a(f(t)<j?j:f(t)),w(f(t));else if("last7"===e){let e=new Date(t);e.setDate(e.getDate()-6),a(f(e)<j?j:f(e)),w(f(t))}else if("last30"===e){let e=new Date(t);e.setDate(e.getDate()-29),a(f(e)<j?j:f(e)),w(f(t))}else if("thisMonth"===e){let e=new Date(t.getFullYear(),t.getMonth(),1);a(f(e)<j?j:f(e)),w(f(t))}else if("prevMonth"===e){let e=new Date(t.getFullYear(),t.getMonth()-1,1),s=new Date(t.getFullYear(),t.getMonth(),0);a(f(e)<j?j:f(e)),w(f(s))}else"allTime"===e?(a(j),w("")):"sincePatch"===e&&(a(k),w(""))},e6=async()=>{O(null),W(null),F([]),E(!0);try{let e={startTs:s===k?1768392e3:function(e){let s=C(e);if(!s)return;let a=Date.UTC(s.y,s.m-1,s.d,0,0,0);if(!isNaN(a))return Math.floor(a/1e3)}(s),endTs:function(e){let s=C(e);if(!s)return;let a=Date.UTC(s.y,s.m-1,s.d,23,59,59);if(!isNaN(a))return Math.floor(a/1e3)}(r),wantAgg:!0},a=await fetch("/api/eth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let t=await a.json();if(!t.ok)throw Error(t.error||"Unknown error");t.warning&&W(t.warning);let l=(t.rows||[]).map(e=>({...e,winningPlayer:v(e.winningPlayer),losingPlayer:v(e.losingPlayer)}));F(l);let n=new Set(ea);for(let e of l)n.add((e.winningPlayer||"").trim()),n.add((e.losingPlayer||"").trim());let i=Array.from(n).filter(Boolean).slice(0,200);et(i);try{localStorage.setItem("recentPlayers",JSON.stringify(i))}catch(e){}eo(t.aggByClass||null),em(t.aggLastUpdate||null)}catch(e){O((null==e?void 0:e.message)||String(e))}finally{E(!1)}},e9=(e,s)=>{let a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=e,r.click(),URL.revokeObjectURL(t)},e8=e=>{if(!e)return null;try{let s=JSON.parse(e);return JSON.stringify(s,null,2)}catch(s){return e}},se=(e,s)=>"https://megaeth.blockscout.com/tx/".concat(e,"?tab=logs"),ss=(e,s)=>{let a=(null==s?void 0:s.map(e=>e.key))||(e[0]?Object.keys(e[0]):[]);return[((null==s?void 0:s.map(e=>e.label))||a).join(","),...e.map(e=>a.map(s=>{let a=e[s],t=null==a?"":String(a),r='"'+t.replace(/"/g,'""')+'"';return/[",\n]/.test(t)?r:t}).join(","))].join("\n")},sa=(e,s,a)=>{let t=new Blob([ss(s,a)],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100",children:[(0,t.jsx)(l(),{children:(0,t.jsx)("title",{children:"Showdown Meta Tracker"})}),(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-10",children:[(0,t.jsxs)("div",{className:"mb-4 rounded-xl bg-black text-white px-4 py-2 text-sm",children:["This tool was brought to you by ",(0,t.jsx)("span",{className:"font-semibold",children:"fisiroky"}),"."," ",(0,t.jsx)("a",{className:"underline",href:"https://x.com/fisiroky",target:"_blank",rel:"noreferrer",children:"Follow on X"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:"/images/showdown_small.jpg",alt:"Showdown logo",className:"h-10 w-10 rounded"}),(0,t.jsx)(d.E.h1,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"text-3xl font-semibold tracking-tight",children:"Showdown Meta Tracker"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("a",{href:N,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full bg-black text-white px-3 py-1 text-xs shadow hover:opacity-90 dark:bg-white dark:text-black",children:"Play Showdown"}),(0,t.jsxs)("button",{onClick:()=>D("dark"===_?"light":"dark"),className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs dark:border-gray-600",title:"dark"===_?"Switch to light mode":"Switch to dark mode",children:["dark"===_?(0,t.jsx)(o.Z,{className:"h-4 w-4"}):(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"dark"===_?"Light":"Dark"]})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("a",{href:N,target:"_blank",rel:"noreferrer","aria-label":"Play Showdown (opens in new tab)",children:(0,t.jsx)("img",{src:"/images/showdown_large.jpeg",alt:"Showdown game artwork",className:"w-full rounded-2xl shadow-sm object-cover"})})}),(0,t.jsx)("div",{className:"mt-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:(0,t.jsxs)("div",{className:"rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm md:sticky md:top-4 z-20 backdrop-blur-sm bg-white/95 dark:bg-gray-800/95 border border-gray-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-100",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4"})," Filters"]}),(0,t.jsx)("label",{className:"mt-3 block text-xs text-gray-500",children:"Player Name"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border p-2 text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",value:M,onChange:e=>{T(e.target.value),q(!0)},onFocus:()=>{X(!0),q(!0)},onBlur:()=>{X(!1),setTimeout(()=>q(!1),150)},placeholder:"barry"}),z&&V&&ea.length>0&&(0,t.jsxs)("div",{className:"absolute z-30 mt-1 w-full max-h-48 overflow-y-auto rounded-xl border bg-white dark:bg-gray-800 dark:border-gray-700 shadow-lg",children:[ea.filter(e=>e.toLowerCase().includes(M.toLowerCase())).slice(0,10).map(e=>(0,t.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 first:rounded-t-xl last:rounded-b-xl",onMouseDown:()=>{T(e),q(!1)},children:e},e)),0===ea.filter(e=>e.toLowerCase().includes(M.toLowerCase())).length&&(0,t.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No matching players"})]})]}),(0,t.jsx)("label",{className:"mt-3 block text-xs text-gray-500",children:"Compare vs (optional)"}),(0,t.jsx)("input",{className:"mt-1 w-full rounded-xl border p-2 text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",value:ex,onChange:e=>eg(e.target.value),placeholder:"opponent player",list:"player-suggestions"}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"Start date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"YYYY-MM-DD or DD.MM.YYYY",className:"mt-1 w-full rounded-xl border p-2 pl-7 text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",value:s,onChange:e=>a(e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"End date (empty = latest)"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"YYYY-MM-DD or DD.MM.YYYY",className:"mt-1 w-full rounded-xl border p-2 pl-7 text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",value:r,onChange:e=>w(e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-gray-500 mr-1",children:"Presets:"}),(0,t.jsx)("button",{className:"rounded-full border px-3 py-1 dark:border-gray-600",onClick:()=>e7("sincePatch"),children:"Since last balance patch"}),(0,t.jsx)("button",{className:"rounded-full border px-3 py-1 dark:border-gray-600",onClick:()=>e7("today"),children:"Today"}),(0,t.jsx)("button",{className:"rounded-full border px-3 py-1 dark:border-gray-600",onClick:()=>e7("thisMonth"),children:"This month"}),(0,t.jsx)("button",{className:"rounded-full border px-3 py-1 dark:border-gray-600",onClick:()=>e7("allTime"),children:"All time"})]}),(0,t.jsxs)("button",{onClick:()=>e6(),disabled:R,className:"mt-4 inline-flex items-center gap-2 rounded-2xl bg-black px-4 py-2 text-white shadow disabled:opacity-60",children:[R?(0,t.jsx)(g.Z,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(h.Z,{className:"h-4 w-4"}),R?"Fetching...":"Compute Winrate"]}),Z&&(0,t.jsxs)("div",{className:"mt-3 rounded-xl border border-red-200 bg-red-50 p-2 text-sm text-red-700 flex items-start gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Heads up"}),(0,t.jsx)("div",{children:Z})]})]}),U&&!Z&&(0,t.jsxs)("div",{className:"mt-3 rounded-xl border border-amber-200 bg-amber-50 p-2 text-sm text-amber-700 flex items-start gap-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:"Heads up"}),(0,t.jsx)("div",{children:U})]})]})]})}),(0,t.jsx)("div",{className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Wins"}),R&&0===eu.wins?(0,t.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}):(0,t.jsx)("div",{className:"mt-1 text-2xl font-bold text-green-600 dark:text-green-400",children:eu.wins})]}),(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Losses"}),R&&0===eu.losses?(0,t.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}):(0,t.jsx)("div",{className:"mt-1 text-2xl font-bold text-red-600 dark:text-red-400",children:eu.losses})]}),(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Win Rate"}),R&&0===eu.wins&&0===eu.losses?(0,t.jsx)("div",{className:"mt-1 h-8 w-20 mx-auto bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}):(0,t.jsxs)("div",{className:"mt-1 text-2xl font-bold",children:[(100*eu.winrate).toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"text-center p-3 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Top Class"}),R&&!eu.dominantClass?(0,t.jsx)("div",{className:"mt-1 h-6 w-24 mx-auto bg-gray-200 dark:bg-gray-600 rounded animate-pulse"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-1 text-sm font-semibold truncate",children:eu.dominantClass||"—"}),eu.dominantClass&&(0,t.jsxs)("div",{className:"text-[10px] text-gray-500",children:[Math.round(100*(eu.dominantClassPct||0)),"% of wins"]})]})]})]})}),ex.trim()&&ep&&(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl bg-white dark:bg-gray-800 p-4 text-center shadow-sm",children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:[ex," — Wins/Losses"]}),(0,t.jsxs)("div",{className:"mt-1 text-2xl font-semibold",children:[ep.wins,"/",ep.losses]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["WR ",(100*ep.winrate).toFixed(1),"%"]})]}),eb&&(0,t.jsxs)("div",{className:"rounded-2xl bg-white dark:bg-gray-800 p-4 text-center shadow-sm md:col-span-2",children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:["Head‑to‑Head vs ",ex]}),(0,t.jsxs)("div",{className:"mt-1 text-2xl font-semibold",children:[M," ",eb.p1Wins," – ",eb.p2Wins," ",ex]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[eb.total," matches"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 rounded-2xl border border-gray-200/70 bg-white/60 p-3 shadow-sm backdrop-blur dark:border-gray-700/70 dark:bg-gray-800/60",children:[(0,t.jsx)("div",{className:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-gray-300",children:"Jump to"}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[(0,t.jsx)("a",{href:"#player-class-stats",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Player class stats"}),(0,t.jsx)("a",{href:"#class-vs-class",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Class vs Class"}),(0,t.jsx)("a",{href:"#player-matches",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Player matches"}),(0,t.jsx)("a",{href:"#global-class-stats",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Global class stats"}),(0,t.jsx)("a",{href:"#top-players",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Top players"}),(0,t.jsx)("a",{href:"#top-by-class",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"Top by class"}),(0,t.jsx)("a",{href:"#all-decoded",className:"rounded-full border border-gray-300 px-3 py-1 text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700/60",children:"All matches (decoded)"})]})]}),(0,t.jsxs)("details",{id:"player-section",className:"mt-6",open:!0,children:[(0,t.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("span",{children:"Player-focused"}),(0,t.jsx)("span",{className:"h-px flex-1 bg-gray-200/70 dark:bg-gray-700/70"}),(0,t.jsx)("span",{className:"text-[11px] normal-case text-gray-400 dark:text-gray-500",children:"depends on selected player"})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{id:"player-class-stats",className:"rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["Per‑Class Performance for ",(0,t.jsx)("span",{className:"font-semibold",children:M||"—"})]}),eJ.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e9("showdown_class_stats_"+(M||"player")+".json",eJ),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]}),(0,t.jsxs)("button",{onClick:()=>sa("showdown_class_stats_"+(M||"player")+".csv",eJ),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 z-10",children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-gray-50 dark:bg-gray-700","aria-sort":"klass"===eE.key?"asc"===eE.dir?"ascending":"descending":"none",onClick:()=>eZ(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===eE.key?"asc"===eE.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===eE.key?"asc"===eE.dir?"ascending":"descending":"none",onClick:()=>eZ(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===eE.key?"asc"===eE.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===eE.key?"asc"===eE.dir?"ascending":"descending":"none",onClick:()=>eZ(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===eE.key?"asc"===eE.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===eE.key?"asc"===eE.dir?"ascending":"descending":"none",onClick:()=>eZ(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===eE.key?"asc"===eE.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===eE.key?"asc"===eE.dir?"ascending":"descending":"none",onClick:()=>eZ(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===eE.key?"asc"===eE.dir?"↑":"↓":""]})]})}),(0,t.jsxs)("tbody",{children:[eJ.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-2 sticky left-0 bg-white dark:bg-gray-800",children:e.klass}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,t.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,t.jsx)("span",{className:"text-gray-400",children:(0,t.jsx)(eQ,{data:eK.get(e.klass)||[]})})]})]},e.klass+s)),R&&0===eJ.length&&(0,t.jsx)(P,{rows:6,cols:5}),0===eJ.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class stats yet — run a query above."})})]})]})})]}),(0,t.jsxs)("div",{id:"class-vs-class",className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:"Class vs Class — Win rates"}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:H,onChange:e=>G(e.target.checked)}),"Only matches incl. ",(0,t.jsx)("span",{className:"font-semibold",children:M||"player"})]})]}),(0,t.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Shows all matches by default; toggle to limit to matches including the selected player."}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Select 2 classes to form a dual-class"}),(0,t.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:["Bureaucrat","Cheater","Gambler","Inventor","Protector","Rebel"].map(e=>{let s=J.includes(e);return(0,t.jsx)("button",{onClick:()=>e5(e),className:"px-2 py-2 sm:px-4 rounded-xl text-xs sm:text-sm font-medium transition-all ".concat(s?"bg-blue-600 text-white shadow-md ring-2 ring-blue-400 ring-offset-1 dark:ring-offset-gray-800":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 hover:scale-105"),children:e},e)})}),1===J.length&&(0,t.jsx)("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"Select one more class to see matchups"})]}),e1&&e2.matchups[e1]&&(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-3 p-3 rounded-xl bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Showing win rates for "}),(0,t.jsx)("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:e1}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:" vs opponents"})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsxs)("th",{className:"p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:()=>$(e=>({key:"opponent",dir:"opponent"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Opponent ","opponent"===B.key?"asc"===B.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:()=>$(e=>({key:"winRate",dir:"winRate"===e.key&&"desc"===e.dir?"asc":"desc"})),children:[(0,t.jsx)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:e1})," WR ","winRate"===B.key?"asc"===B.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:()=>$(e=>({key:"wins",dir:"wins"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Wins ","wins"===B.key?"asc"===B.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:()=>$(e=>({key:"losses",dir:"losses"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Losses ","losses"===B.key?"asc"===B.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",onClick:()=>$(e=>({key:"total",dir:"total"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Games ","total"===B.key?"asc"===B.dir?"↑":"↓":""]})]})}),(0,t.jsx)("tbody",{children:0===e2.matchups[e1].length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{className:"p-4 text-center text-gray-500",colSpan:5,children:["No matchup data for ",e1,"."]})}):[...e2.matchups[e1]].sort((e,s)=>{let a="asc"===B.dir?1:-1;return"opponent"===B.key?a*e.opponent.localeCompare(s.opponent):"winRate"===B.key?a*(e.winRate-s.winRate):"wins"===B.key?a*(e.wins-s.wins):"losses"===B.key?a*(e.losses-s.losses):a*(e.total-s.total)}).map(e=>{let s=Math.round(120*e.winRate);return(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-2 font-medium",children:e.opponent}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(s,", 60%, 45%)")},children:[(100*e.winRate).toFixed(0),"%"]})}),(0,t.jsx)("td",{className:"p-2 text-center tabular-nums text-green-600 dark:text-green-400",children:e.wins}),(0,t.jsx)("td",{className:"p-2 text-center tabular-nums text-red-600 dark:text-red-400",children:e.losses}),(0,t.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total})]},e.opponent)})})]})})]}),e1&&!e2.matchups[e1]&&e2.classes.length>0&&(0,t.jsxs)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-xl dark:border-gray-700",children:["No data found for ",(0,t.jsx)("span",{className:"font-semibold",children:e1})," in the current dataset"]}),!e1&&e2.classes.length>0&&(0,t.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-xl dark:border-gray-700",children:"Select 2 classes above to see matchup win rates"}),0===e2.classes.length&&(0,t.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm",children:R?"Loading...":"No dual-class data yet — run a query above."})]}),(0,t.jsxs)("div",{id:"player-matches",className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["Matches for ",(0,t.jsx)("span",{className:"font-semibold",children:M||"—"})," (",ey.length,")"]}),ey.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e9("showdown_matches_for_"+(M||"player")+".json",ey),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]}),(0,t.jsxs)("button",{onClick:()=>sa("showdown_matches_for_"+(M||"player")+".csv",ey),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 z-10",children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===e_.key?"asc"===e_.dir?"ascending":"descending":"none",onClick:()=>eD(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===e_.key?"asc"===e_.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-20 cursor-pointer","aria-sort":"result"===e_.key?"asc"===e_.dir?"ascending":"descending":"none",onClick:()=>eD(e=>({key:"result",dir:"result"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Result ","result"===e_.key?"asc"===e_.dir?"↑":"↓":""]}),(0,t.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eD(e=>({key:"opponent",dir:"opponent"==e.key&&"asc"===e.dir?"desc":"asc"})),children:"Opponent"}),(0,t.jsx)("th",{className:"p-2 w-44",children:"Player class"}),(0,t.jsx)("th",{className:"p-2 w-44",children:"Opponent class"}),(0,t.jsx)("th",{className:"p-2 w-24",children:"Duration"}),(0,t.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===e_.key?"asc"===e_.dir?"ascending":"descending":"none",onClick:()=>eD(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===e_.key?"asc"===e_.dir?"↑":"↓":""]}),(0,t.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,t.jsxs)("tbody",{children:[eY.map((e,s)=>(e8(e.metadata),(0,t.jsxs)(n.Fragment,{children:[(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>eH(e.txHash),children:[(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,t.jsx)("td",{className:"p-2 font-medium",children:e.result}),(0,t.jsx)("td",{className:"p-2",children:e.opponent}),(0,t.jsx)("td",{className:"p-2",children:e.playerClasses}),(0,t.jsx)("td",{className:"p-2",children:e.opponentClasses}),(0,t.jsx)("td",{className:"p-2",children:e.gameLength||"—"}),(0,t.jsx)("td",{className:"p-2",children:e.startedAt}),(0,t.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,t.jsx)("a",{className:"text-blue-600 underline",href:se(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,t.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>eF(e.txHash),children:K===e.txHash?(0,t.jsx)(p.Z,{className:"h-3 w-3"}):(0,t.jsx)(b.Z,{className:"h-3 w-3"})})]})]}),er.has(e.txHash)&&(0,t.jsx)("tr",{className:"border-b dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/40",children:(0,t.jsx)("td",{colSpan:8,className:"p-3 text-xs",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Player class:"})," ",e.playerClasses]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Opponent class:"})," ",e.opponentClasses]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength||"—"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+s))),0===ey.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:8,children:R?(0,t.jsx)(P,{rows:8,cols:7}):"No matches for this player in range ".concat(e0," yet.")})})]})]})}),ey.length>ev&&(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,t.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eN(e=>Math.max(1,e-1)),disabled:1===ek,children:"Prev"}),(0,t.jsxs)("div",{children:["Page ",ek," / ",Math.ceil(ey.length/ev)]}),(0,t.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eN(e=>Math.min(Math.ceil(ey.length/ev),e+1)),disabled:ek>=Math.ceil(ey.length/ev),children:"Next"}),(0,t.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-white dark:bg-gray-900 dark:border-gray-700",value:ev,onChange:e=>ef(Number(e.target.value)),children:[(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:15,children:"15"}),(0,t.jsx)("option",{value:25,children:"25"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"})]}),(0,t.jsx)("input",{value:eM,onChange:e=>eL(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(eM||"1",10);isNaN(e)||eN(Math.min(Math.max(1,e),Math.ceil(ey.length/ev)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-white dark:bg-gray-900 dark:border-gray-700",placeholder:"Go"})]})]})]})]}),(0,t.jsxs)("details",{id:"global-section",className:"mt-10",open:!0,children:[(0,t.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("span",{children:"Meta / Global"}),(0,t.jsx)("span",{className:"h-px flex-1 bg-gray-200/70 dark:bg-gray-700/70"}),(0,t.jsxs)("span",{className:"text-[11px] normal-case text-gray-400 dark:text-gray-500",children:["all matches in range (",e0,")"]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{id:"global-class-stats",className:"rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["Per‑Class Performance — All Matches (",e0,")"]}),eI.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e9("showdown_class_stats_all.json",eI),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]}),(0,t.jsxs)("button",{onClick:()=>sa("showdown_class_stats_all.csv",eI),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,t.jsx)("div",{className:"mt-1 text-[10px] text-gray-500",children:ec?"Aggregates last updated ".concat(new Date(ec).toLocaleString()):""}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 z-10",children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-gray-50 dark:bg-gray-700","aria-sort":"klass"===eA.key?"asc"===eA.dir?"ascending":"descending":"none",onClick:()=>eR(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===eA.key?"asc"===eA.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===eA.key?"asc"===eA.dir?"ascending":"descending":"none",onClick:()=>eR(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===eA.key?"asc"===eA.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===eA.key?"asc"===eA.dir?"ascending":"descending":"none",onClick:()=>eR(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===eA.key?"asc"===eA.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===eA.key?"asc"===eA.dir?"ascending":"descending":"none",onClick:()=>eR(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===eA.key?"asc"===eA.dir?"↑":"↓":""]}),(0,t.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===eA.key?"asc"===eA.dir?"ascending":"descending":"none",onClick:()=>eR(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===eA.key?"asc"===eA.dir?"↑":"↓":""]})]})}),(0,t.jsxs)("tbody",{children:[eI.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-2 sticky left-0 bg-white dark:bg-gray-800",children:e.klass}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,t.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,t.jsx)("span",{className:"text-gray-400",children:(0,t.jsx)(eQ,{data:eV.get(e.klass)||[]})})]})]},e.klass+s)),R&&0===eI.length&&(0,t.jsx)(P,{rows:6,cols:5}),0===eI.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No data yet — run a query above."})})]})]})})]}),(0,t.jsxs)("div",{id:"top-players",className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["Top Players by Win Rate ",(0,t.jsx)("span",{className:"text-gray-500",children:"(min 30 games)"})]}),e4.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e9("showdown_top_players.json",e4),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]}),(0,t.jsxs)("button",{onClick:()=>sa("showdown_top_players.csv",e4),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsx)("th",{className:"p-2 w-10",children:"#"}),(0,t.jsx)("th",{className:"p-2",children:"Player"}),(0,t.jsx)("th",{className:"p-2",children:"Wins"}),(0,t.jsx)("th",{className:"p-2",children:"Losses"}),(0,t.jsx)("th",{className:"p-2",children:"Games"}),(0,t.jsx)("th",{className:"p-2",children:"Win Rate"})]})}),(0,t.jsxs)("tbody",{children:[e4.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-2 tabular-nums",children:s+1}),(0,t.jsx)("td",{className:"p-2",children:e.player}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,t.jsxs)("td",{className:"p-2 tabular-nums",children:[(100*e.winrate).toFixed(1),"%"]})]},e.player+s)),R&&0===e4.length&&(0,t.jsx)(P,{rows:5,cols:6}),!R&&0===e4.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:6,children:"No players meet the 30‑game threshold yet."})})]})]})})]}),(0,t.jsxs)("div",{id:"top-by-class",className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["Top Player by Class ",(0,t.jsx)("span",{className:"text-gray-500",children:"(dual-classes, min 20 games)"})]}),e3.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("button",{onClick:()=>e9("showdown_top_by_class.json",e3),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]})})]}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsx)("th",{className:"p-2",children:"Class"}),(0,t.jsx)("th",{className:"p-2",children:"Best Player"}),(0,t.jsx)("th",{className:"p-2 text-center",children:"W/L"}),(0,t.jsx)("th",{className:"p-2 text-center",children:"Games"}),(0,t.jsx)("th",{className:"p-2 text-center",children:"Win Rate"})]})}),(0,t.jsxs)("tbody",{children:[e3.map(e=>{let s=Math.round(120*e.winrate);return(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsx)("td",{className:"p-2 font-medium",children:e.klass}),(0,t.jsx)("td",{className:"p-2",children:e.player}),(0,t.jsxs)("td",{className:"p-2 text-center tabular-nums",children:[(0,t.jsx)("span",{className:"text-green-600 dark:text-green-400",children:e.wins}),(0,t.jsx)("span",{className:"text-gray-400 mx-1",children:"/"}),(0,t.jsx)("span",{className:"text-red-600 dark:text-red-400",children:e.losses})]}),(0,t.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total}),(0,t.jsx)("td",{className:"p-2 text-center",children:(0,t.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(s,", 60%, 45%)")},children:[(100*e.winrate).toFixed(0),"%"]})})]},e.klass)}),R&&0===e3.length&&(0,t.jsx)(P,{rows:5,cols:5}),!R&&0===e3.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class data available yet."})})]})]})})]}),(0,t.jsxs)("div",{id:"all-decoded",className:"mt-6 rounded-2xl bg-white dark:bg-gray-800 p-4 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-100",children:["All Decoded Matches (",Y.length,")"]}),Y.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>e9("showdown_winrate_results.json",Y),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," JSON"]}),(0,t.jsxs)("button",{onClick:()=>sa("showdown_winrate_results.csv",Y),className:"inline-flex items-center gap-2 rounded-xl border px-3 py-1.5 text-sm",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,t.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,t.jsx)("thead",{className:"sticky top-0 z-10",children:(0,t.jsxs)("tr",{className:"border-b bg-gray-50 dark:bg-gray-700 dark:border-gray-700",children:[(0,t.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===eP.key?"asc"===eP.dir?"ascending":"descending":"none",onClick:()=>eT(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===eP.key?"asc"===eP.dir?"↑":"↓":""]}),(0,t.jsx)("th",{className:"p-2 w-40",children:"Game ID"}),(0,t.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===eP.key?"asc"===eP.dir?"ascending":"descending":"none",onClick:()=>eT(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===eP.key?"asc"===eP.dir?"↑":"↓":""]}),(0,t.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eT(e=>({key:"winningPlayer",dir:"winningPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Winner"}),(0,t.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eT(e=>({key:"losingPlayer",dir:"losingPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Loser"}),(0,t.jsx)("th",{className:"p-2 w-36",children:"Reason"}),(0,t.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,t.jsxs)("tbody",{children:[eU.map((e,s)=>(e8(e.metadata),(0,t.jsxs)(n.Fragment,{children:[(0,t.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:()=>eG(e.txHash),children:[(0,t.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,t.jsx)("td",{className:"p-2",children:e.gameId}),(0,t.jsx)("td",{className:"p-2",children:e.startedAt}),(0,t.jsx)("td",{className:"p-2 font-medium",children:e.winningPlayer}),(0,t.jsx)("td",{className:"p-2",children:e.losingPlayer}),(0,t.jsx)("td",{className:"p-2",children:e.endReason}),(0,t.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,t.jsx)("a",{className:"text-blue-600 underline",href:se(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,t.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>eF(e.txHash),children:K===e.txHash?(0,t.jsx)(p.Z,{className:"h-3 w-3"}):(0,t.jsx)(b.Z,{className:"h-3 w-3"})})]})]}),en.has(e.txHash)&&(0,t.jsx)("tr",{className:"border-b dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/40",children:(0,t.jsx)("td",{colSpan:7,className:"p-3 text-xs",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Winning classes:"})," ",e.winningClasses]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Losing classes:"})," ",e.losingClasses]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+s))),0===Y.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:7,children:R?(0,t.jsx)(P,{rows:10,cols:7}):"No rows for range ".concat(e0,". Pick a different date range and click Compute.")})})]})]})}),Y.length>ev&&(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,t.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>ej(e=>Math.max(1,e-1)),disabled:1===ew,children:"Prev"}),(0,t.jsxs)("div",{children:["Page ",ew," / ",Math.ceil(Y.length/ev)]}),(0,t.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>ej(e=>Math.min(Math.ceil(Y.length/ev),e+1)),disabled:ew>=Math.ceil(Y.length/ev),children:"Next"}),(0,t.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-white dark:bg-gray-900 dark:border-gray-700",value:ev,onChange:e=>ef(Number(e.target.value)),children:[(0,t.jsx)("option",{value:5,children:"5"}),(0,t.jsx)("option",{value:15,children:"15"}),(0,t.jsx)("option",{value:25,children:"25"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"})]}),(0,t.jsx)("input",{value:eC,onChange:e=>eS(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(eC||"1",10);isNaN(e)||ej(Math.min(Math.max(1,e),Math.ceil(Y.length/ev)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-white dark:bg-gray-900 dark:border-gray-700",placeholder:"Go"})]})]})]})]}),(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:"Daily cache on the server makes historical queries instant; today is fetched incrementally."})]}),K&&(0,t.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-30 rounded-full bg-black text-white px-3 py-1 text-xs shadow dark:bg-white dark:text-black",children:["Copied tx: ",K.slice(0,10),"…"]}),(0,t.jsx)(L,{visible:ee})]})}function L(e){let{visible:s}=e;return s?(0,t.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-6 right-6 z-20 rounded-full bg-black text-white p-3 shadow-lg dark:bg-white dark:text-black",title:"Back to top",children:(0,t.jsx)(w.Z,{className:"h-4 w-4"})}):null}function P(e){let{rows:s,cols:a}=e,r=Array.from({length:s}),l=Array.from({length:a});return(0,t.jsx)(t.Fragment,{children:r.map((e,s)=>(0,t.jsx)("tr",{className:"animate-pulse",children:l.map((e,s)=>(0,t.jsx)("td",{className:"p-2",children:(0,t.jsx)("div",{className:"h-3 rounded bg-gray-200 dark:bg-gray-700"})},s))},s))})}}},function(e){e.O(0,[107,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);