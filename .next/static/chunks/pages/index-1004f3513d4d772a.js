(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6209)}])},6209:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var a=s(5893),r=s(9008),l=s.n(r),n=s(7294),i=s(1163),c=s(1891),o=s(8088),d=s(5197),x=s(5482),m=s(6090),g=s(3552),h=s(3785),u=s(6582);let p={"0x40c1eaa23ddd6973330889b30bce05fa21e9b87d":"been1575","0x2ddf9f00cd543f54421cef64eb29c408b49d679f":"Alex","0xf645058ed581662df6b8d07239ecf8a5433d19ec":"Nav","0xef71cf2f7e246783e8c660ab70e59629e952b5be":"Asso","0x4221b5252200b45db09bf635599f0498ec702d09":"homeprotector","0x13cf9980a0238d6f32c3e70172695eca57216fec":"Flash","0x7b149bd829021c7da62bd8c6af1e041367938acf":"megaflop","0xc0a89392f019e81b35ce3bfa82d2309e621ccb7a":"krysaaa","0x1befab8bf83742fa13162d65c528a029b9786076":"barry","0x34079266660196371cfd4cbd3afcbe937909e2c2":"ASR","0xb8680980b03776fb12948442325171ae4fea4b11":"Hoangthao","0xa61933b3074db32c4acca235e9f6991a8dce685b":"fajridrop","0x3dc0ebb9bace78124e2168f3339d04b18af1cd88":"McDuck","0x04e49b062680bc585ccaa8e81c28000ea8664eb3":"GPpoker","0x1be706aacfdc2244611b54ffed0502dc45a45bd1":"SE1","0x8b0219552a3bd3a843c083b9d6ca1e99dafd44d7":"Kaito","0x229a171a3c486762e080b22d1b687ceb9fc74fa3":"metaalex","0x8689ad878545177403f5be5e6e31cfef94025a81":"Lilin","0x48efd1928d62c38bdcdd2b6d71ac60c4f333e1f":"m777","0x910d0efd8e2d831af89fb9ec60d22b60e6f34508":"saintlee","0x90edb8322ebf7695dfdc22324c844af273828af3":"CrypLykos","0x6e9aabcbfa8a45e715729b4df3643e8bec3a1f4c":"nguyenhai","0x9b9595555b77c5add018b2e52f5ed7e9e34a28fa":"Lecrawl","0xda3f1157b1c66ed91fa835eade9a9026a8495c35":"mrL","0xd3f804e7a8e5d9a3a84ab9f6b18c7e33bbc6baab":"eduzzo","0xdf9cb973634af0b5cb8c953c77213cb2f8489951":"bangsand","0x2550fdf63d761d3e912282d041a527aef493aff7":"Corleone","0x09a920a30c406db57b6d1a56f24eb0af43468f71":"Ariefw219","0x3c39ce87ed582a91db288aa0556d5b954da4acdc":"ninja3","0x958e31a0a9410b9f6204fe0a6a52de644f5f3f8b":"LYLN","0x5e14da20d61969d445a07ad3a576a7c1c2710952":"ComfyJoe","0x12ad0d86952bfa551a5166aee20ce0d47c12d3e6":"NorrisNguyenNP","0xade6976f6d4930cb1868d48d1cdf99c6db3dea38":"KINGTA","0x7fdf6ced2953d53a30ca2774f918cdff293f04ed":"Ajeto","0xe000441b32d0aba1bd2fb5b7fd1e7f82cb612052":"MegaManRivs","0x8bea9b54e8e145b0b1f69b47b54d5a577b00ea4a":"jam","0x647f44d213a1c76f51621943d0b1ee28877ce4fc":"Kangliu","0x0c3e1eee5723ff6d670f9f2cc2e9541fd30c5ef2":"Scorpion","0x790c4a63f30f098efdd16c64b54939877eca43d1":"miguelusin","0x7e77b7b7f379fa67bb82505080a952eda83806b3":"Yan","0xb10ee603248bdd1d5f004d48e87f52a96bd1e149":"police911","0x11b72e0c989be9130cefb10832fefb4f49cdcdd8":"chiboozor","0xf05dabb6fcdb8f51dd39aa42ea811285efee57cf":"mouse","0x49015274d2c9e71938d3e471072c2b749f786a91":"Snep","0x4db3c5a9b9742295950d13e25c8cdaf9bb203e1c":"RQLTR","0x64a6ce1145e23c9caf9b5da2be3a13c9d8945b8f":"DarthDuck","0x853db182b8783fa8250d96e0d38f95e457e5f3d6":"StanCifka","0x5e535ac83516c729624874be88c275b86a0878c4":"gdgr","0x4e8c39b5aad3ddb277ac56b9463fe279c596b40d":"tango"},b="2025-07-25",y="2026-01-13",f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function v(e){if(!e)return"";let t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return e;let[,s,a,r]=t;return"".concat(s,"-").concat(f[parseInt(a,10)-1],"-").concat(r)}function w(e){if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;let t=e.match(/^(\d{4})-([A-Za-z]{3})-(\d{2})$/);if(t){let[,e,s,a]=t,r=f.findIndex(e=>e.toLowerCase()===s.toLowerCase());if(r>=0)return"".concat(e,"-").concat(String(r+1).padStart(2,"0"),"-").concat(a)}return e}let j=e=>{if(!e)return"";let t=e.trim(),s=t.indexOf("#");return -1===s?t:t.slice(0,s)};function N(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)}function k(e){if(!e)return null;let t=e.trim(),s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(t);return s?{y:Number(s[1]),m:Number(s[2]),d:Number(s[3])}:(s=/^([0-9]{2})\.([0-9]{2})\.([0-9]{4})$/.exec(t))?{y:Number(s[3]),m:Number(s[2]),d:Number(s[1])}:(s=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(t))?{y:Number(s[3]),m:Number(s[1]),d:Number(s[2])}:null}function C(e){let t=k(e);if(!t)return e||"";let s=new Date(t.y,t.m-1,t.d);if(isNaN(s.getTime()))return e||"";let a=s.toLocaleString("en-US",{month:"short"}),r=String(t.y).slice(-2);return"".concat(a," ").concat(t.d," ").concat(r)}function S(e){let t=k(e);if(!t)return;let s=Date.UTC(t.y,t.m-1,t.d,0,0,0);if(!isNaN(s))return Math.floor(s/1e3)}function P(e){let t=k(e);if(!t)return;let s=Date.UTC(t.y,t.m-1,t.d,23,59,59);if(!isNaN(s))return Math.floor(s/1e3)}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"$0";let s=BigInt(e),a=Number((s<0n?-s:s)/0xde0b6b3a7640000n).toLocaleString("en-US");return"".concat(s<0n?"-":t&&s>0n?"+":"","$").concat(a)}function L(e){if(!e)return"";let t=e.trim();return t.length<=10?t:"".concat(t.slice(0,6),"…").concat(t.slice(-4))}let T=[{address:"0x9B9595555B77c5aDd018B2E52F5eD7e9e34a28FA",prize:2400,display:"1 ETH (~$2,400)",rank:1},{address:"0xEf71Cf2F7E246783E8c660ab70E59629E952b5be",prize:300,display:"$300",rank:2},{address:"0x40c1EAA23DDD6973330889B30bcE05Fa21E9B87D",prize:200,display:"$200",rank:3},{address:"0x64A6cE1145E23c9CaF9b5dA2BE3a13C9d8945B8f",prize:100,display:"$100",rank:4},{address:"0x11B72e0C989bE9130cEFb10832fEFB4F49CdcDd8",prize:50,display:"$50",rank:5},{address:"0x910D0EFd8E2D831af89FB9eC60D22B60E6f34508",prize:50,display:"$50",rank:6},{address:"0x2DdF9F00CD543F54421CEf64eB29C408b49D679F",prize:50,display:"$50",rank:7},{address:"0x3Dc0ebb9bACe78124e2168F3339d04B18AF1cd88",prize:50,display:"$50",rank:8}],D=T.reduce((e,t)=>e+t.prize,0);function B(){let e=(0,i.useRouter)(),[t,s]=(0,n.useState)(y),[r,f]=(0,n.useState)(""),[k,B]=(0,n.useState)("barry"),U=(0,n.useRef)(!1),F=(0,n.useRef)(null),[_,R]=(0,n.useState)(!1),[O,Z]=(0,n.useState)(null),[I,z]=(0,n.useState)(null),[$,H]=(0,n.useState)([]),[V,J]=(0,n.useState)(!1),[W,G]=(0,n.useState)("all"),[Y,q]=(0,n.useState)([]),[K,X]=(0,n.useState)({key:"total",dir:"desc"}),[Q,ee]=(0,n.useState)(!1),[et,es]=(0,n.useState)(!1),[ea,er]=(0,n.useState)(null),[el,en]=(0,n.useState)(!1),[ei,ec]=(0,n.useState)([]),[eo,ed]=(0,n.useState)(new Set),[ex,em]=(0,n.useState)(new Set),[eg,eh]=(0,n.useState)(null),[eu,ep]=(0,n.useState)(null),[eb,ey]=(0,n.useState)(""),[ef,ev]=(0,n.useState)([]),[ew,ej]=(0,n.useState)(!1),[eN,ek]=(0,n.useState)(null),[eC,eS]=(0,n.useState)(null),[eP,eM]=(0,n.useState)([]),[eL,eT]=(0,n.useState)("0"),[eD,eB]=(0,n.useState)([]),[eE,eA]=(0,n.useState)([]),[eU,eF]=(0,n.useState)("all"),[e_,eR]=(0,n.useState)({}),[eO,eZ]=(0,n.useState)({}),[eI,ez]=(0,n.useState)(null),[e$,eH]=(0,n.useState)(!1),[eV,eJ]=(0,n.useState)(!1),[eW,eG]=(0,n.useState)("idle"),eY="weekly"===eU?eD:"monthly"===eU?eE:ef;(0,n.useEffect)(()=>{try{"undefined"!=typeof document&&document.documentElement.classList.add("dark");let e=localStorage.getItem("recentPlayers");e&&ec(JSON.parse(e));let t=localStorage.getItem("dominantClasses");t&&eR(JSON.parse(t))}catch(e){}fetch("/api/wallets").then(e=>e.json()).then(e=>{e.ok&&e.mapping&&eZ(e.mapping)}).catch(()=>{})},[]),(0,n.useEffect)(()=>{0!==ef.length||ew||tJ()},[!0]),(0,n.useEffect)(()=>{if(U.current||!e.isReady)return;let t=e.query,a="string"==typeof t.start?t.start:void 0,r="string"==typeof t.end?t.end:void 0,l="string"==typeof t.player?t.player:void 0,n="string"==typeof t.only?t.only:void 0;"string"==typeof t.theme&&t.theme;let i="string"==typeof t.compare?t.compare:void 0;a&&s(a),r&&f(r),l&&B(l),"1"===n&&J(!0),i&&ey(i);let c="string"==typeof t.share?t.share:void 0;c&&(eH(!0),fetch("/api/share?id=".concat(encodeURIComponent(c))).then(e=>e.json()).then(e=>{if(!e.ok)throw Error(e.error||"Failed to load snapshot");let t=e.data||{};t.params&&(t.params.start&&s(t.params.start),void 0!==t.params.end&&f(t.params.end),t.params.player&&B(t.params.player),"1"===t.params.only&&J(!0),t.params.compare&&ey(t.params.compare)),H(t.rows||[]),eh(t.aggByClass||null),ep(t.aggLastUpdate||null),z(null),Z(null)}).catch(e=>Z((null==e?void 0:e.message)||String(e))).finally(()=>eH(!1))),U.current=!0},[e.isReady]),(0,n.useEffect)(()=>{if(!U.current)return;let s={};t&&(s.start=t),r&&(s.end=r),k&&(s.player=k),V&&(s.only="1"),eb.trim()&&(s.compare=eb.trim()),e.replace({pathname:e.pathname,query:s},void 0,{shallow:!0})},[t,r,k,eb,V]);let eq=(0,n.useMemo)(()=>{let e={};for(let l of $){var t,s,a,r;let n=(null===(s=l.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())||"",i=(null===(r=l.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())||"";n&&(e[n]=(e[n]||0)+1),i&&(e[i]=(e[i]||0)+1)}return e},[$]),eK=(0,n.useMemo)(()=>"all"===W?$:$.filter(e=>{var t,s,a,r;let l=(null===(s=e.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())||"",n=(null===(r=e.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())||"",i=eq[l]||0,c=eq[n]||0,o=i>=25,d=c>=25;return"pro"===W?o&&d:"mixed"===W?o&&!d||!o&&d:!o&&!d}),[$,W,eq]),eX=(0,n.useMemo)(()=>eK,[eK]),eQ=(0,n.useMemo)(()=>{let e=k.trim().toLowerCase(),t=eX.filter(t=>{var s,a;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),s=eX.filter(t=>{var s,a;return(null===(a=t.losingPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),a=t.length,r=s.length,l=a+r,n=new Map;for(let e of t){var i;let t=(null!==(i=e.winningClasses)&&void 0!==i?i:"").trim();t&&n.set(t,(n.get(t)||0)+1)}let c=null,o=0;for(let[e,t]of n.entries())t>o&&(c=e,o=t);let d=a?o/a:0;return{wins:a,losses:r,total:l,winrate:l?a/l:0,dominantClass:c,dominantClassPct:d}},[eX,k]),e0=(0,n.useMemo)(()=>{let e=0;for(let t of $){let s=function(e){if(!e)return null;let t=e.trim(),s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(t);if(s)return Math.floor(Date.UTC(Number(s[1]),Number(s[2])-1,Number(s[3]),Number(s[4]),Number(s[5]),Number(s[6]))/1e3);let a=Date.parse(t.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(a)?null:Math.floor(a/1e3)}(t.startedAt);s&&s>e&&(e=s)}return e?new Date(1e3*e).toLocaleString():null},[$]),e1=(0,n.useMemo)(()=>{let e=P(r),t=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())/1e3,a=new Date((s-1)*1e3);return eV||e&&!(e>=s)?e0||"latest cached block":a.toLocaleString()},[e0,r,eV]),e2=(0,n.useMemo)(()=>{let e=k.trim().toLowerCase();return eK.filter(t=>{var s,a,r,l;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e||(null===(l=t.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e}).map(t=>{var s,a,r,l,n,i;return{...t,result:(()=>{var s,a;let r=(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e,l=(t.endReason||"").toLowerCase().includes("timeout"),n=r?"Win":"Loss";return l?n+" Timeout":n})(),opponent:(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e?t.losingPlayer:t.winningPlayer,playerClasses:(null===(l=t.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e?t.winningClasses:t.losingClasses,opponentClasses:(null===(i=t.winningPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase())===e?t.losingClasses:t.winningClasses}}).sort((e,t)=>t.blockNumber-e.blockNumber)},[eK,k]);(0,n.useMemo)(()=>{let e=eb.trim().toLowerCase();if(!e)return null;let t=eX.filter(t=>{var s,a;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),s=eX.filter(t=>{var s,a;return(null===(a=t.losingPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),a=t.length,r=s.length,l=a+r;return{wins:a,losses:r,total:l,winrate:l?a/l:0}},[eX,eb]),(0,n.useMemo)(()=>{let e=k.trim().toLowerCase(),t=eb.trim().toLowerCase();if(!e||!t)return null;let s=0,a=0;for(let c of eX){var r,l,n,i;let o=null===(l=c.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase(),d=null===(i=c.losingPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase();o===e&&d===t?s++:o===t&&d===e&&a++}return{p1Wins:s,p2Wins:a,total:s+a}},[eX,k,eb]);let[e5,e4]=(0,n.useState)(1),[e3,e8]=(0,n.useState)(1),[e6,e9]=(0,n.useState)(5),[e7,te]=(0,n.useState)(""),[tt,ts]=(0,n.useState)(""),[ta,tr]=(0,n.useState)({key:"startedAt",dir:"desc"}),[tl,tn]=(0,n.useState)({key:"startedAt",dir:"desc"}),[ti,tc]=(0,n.useState)({key:"winrate",dir:"desc"}),[to,td]=(0,n.useState)({key:"total",dir:"desc"}),tx=(0,n.useMemo)(()=>{let e=$.slice();return e.sort((e,t)=>{let s=ta.key,a=e[s],r=t[s];if("startedAt"===s){let e=e=>{if(!e)return 0;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(Number(t[1]),Number(t[2])-1,Number(t[3]),Number(t[4]),Number(t[5]),Number(t[6]))/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?0:Math.floor(s/1e3)};a=e(a),r=e(r)}let l=a<r?-1:a>r?1:0;return"asc"===ta.dir?l:-l}),e},[$,ta]),tm=(0,n.useMemo)(()=>{let e=(e5-1)*e6;return tx.slice(e,e+e6)},[tx,e5,e6]),tg=(0,n.useMemo)(()=>{let e=e2.slice();return e.sort((e,t)=>{let s=tl.key,a=e[s],r=t[s];if("startedAt"===s){let e=e=>{if(!e)return 0;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(Number(t[1]),Number(t[2])-1,Number(t[3]),Number(t[4]),Number(t[5]),Number(t[6]))/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?0:Math.floor(s/1e3)};a=e(a),r=e(r)}let l=a<r?-1:a>r?1:0;return"asc"===tl.dir?l:-l}),e},[e2,tl]),th=(0,n.useMemo)(()=>{let e=(e3-1)*e6;return tg.slice(e,e+e6)},[tg,e3,e6]);(0,n.useEffect)(()=>{e4(1)},[$,e6]),(0,n.useEffect)(()=>{e8(1)},[e2,e6]),(0,n.useEffect)(()=>{let e=e=>{var t,s;(null===(t=e.target)||void 0===t?void 0:t.tagName)!=="INPUT"&&(null===(s=e.target)||void 0===s?void 0:s.tagName)!=="TEXTAREA"&&("ArrowRight"===e.key&&e4(e=>Math.min(Math.ceil($.length/e6)||1,e+1)),"ArrowLeft"===e.key&&e4(e=>Math.max(1,e-1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[$,e6]),(0,n.useEffect)(()=>{let e=()=>en(window.scrollY>400);return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),(0,n.useEffect)(()=>{F.current&&$.length>0&&(F.current.scrollLeft=F.current.scrollWidth)},[$]);let tu=async e=>{try{await navigator.clipboard.writeText(e),er(e),setTimeout(()=>er(null),1200)}catch(e){}},tp=e=>{ed(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},tb=e=>{em(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},ty=(0,n.useMemo)(()=>{let e=k.trim().toLowerCase(),t=new Map;for(let c of eX){var s,a,r,l,n,i;if((null===(a=c.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e){let e=(null!==(n=c.winningClasses)&&void 0!==n?n:"").trim()||"(unknown)",s=t.get(e)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,t.set(e,s)}else if((null===(l=c.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e){let e=(null!==(i=c.losingClasses)&&void 0!==i?i:"").trim()||"(unknown)",s=t.get(e)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,t.set(e,s)}}let c=Array.from(t.entries()).map(e=>{let[t,s]=e;return{klass:t,...s,winrate:s.total?s.wins/s.total:0}});return c.sort((e,t)=>{let s=to.key,a=to.dir,r=e[s]<t[s]?-1:e[s]>t[s]?1:0;return"asc"===a?r:-r}),c},[eX,k,to]),tf=(0,n.useMemo)(()=>{let e=new Map;for(let a of eX){var t,s;let r=(null!==(t=a.winningClasses)&&void 0!==t?t:"").trim(),l=(null!==(s=a.losingClasses)&&void 0!==s?s:"").trim();if(r){let t=e.get(r)||{wins:0,losses:0,total:0};t.wins+=1,t.total+=1,e.set(r,t)}if(l){let t=e.get(l)||{wins:0,losses:0,total:0};t.losses+=1,t.total+=1,e.set(l,t)}}let a=Array.from(e.entries()).map(e=>{let[t,s]=e;return{klass:t,...s,winrate:s.total?s.wins/s.total:0}});return a.sort((e,t)=>{let s=ti.key,a=ti.dir,r=e[s]<t[s]?-1:e[s]>t[s]?1:0;return"asc"===a?r:-r}),a},[eX,ti]);function tv(e){if(!e)return null;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5],+t[6])/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?null:Math.floor(s/1e3)}let tw=(0,n.useMemo)(()=>{let e=new Set;for(let t of eX){let s=tv(t.startedAt);null!=s&&e.add(Math.floor(s/86400))}return Array.from(e).sort((e,t)=>e-t)},[eX]),tj=(0,n.useMemo)(()=>{let e=k.trim().toLowerCase(),t=new Set;for(let n of eX){var s,a,r,l;if((null===(a=n.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())!==e&&(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())!==e)continue;let i=tv(n.startedAt);null!=i&&t.add(Math.floor(i/86400))}return Array.from(t).sort((e,t)=>e-t)},[eX,k]);function tN(e,t,s){let a=new Map;s.forEach((e,t)=>a.set(e,t));let r=new Map(t.map(e=>[e,Array(s.length).fill(0)]));for(let t of e){let e=tv(t.startedAt);if(null==e)continue;let s=Math.floor(e/86400),l=a.get(s);if(null==l)continue;let n=(t.winningClasses||"").trim(),i=(t.losingClasses||"").trim();n&&r.has(n)&&(r.get(n)[l]+=1),i&&r.has(i)&&(r.get(i)[l]+=1)}return r}let tk=(0,n.useMemo)(()=>tN(eX,tf.map(e=>e.klass),tw),[eX,tf,tw]),tC=(0,n.useMemo)(()=>{let e=k.trim().toLowerCase();return eX.filter(t=>{var s,a,r,l;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e||(null===(l=t.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e})},[eX,k]),tS=(0,n.useMemo)(()=>tN(tC,ty.map(e=>e.klass),tj),[tC,ty,tj]);function tP(e){let{data:t}=e,s=Math.max(1,...t),r=t.length>1?60/(t.length-1):60,l=t.map((e,t)=>"".concat(t*r,",").concat(14-e/s*14)).join(" ");return(0,a.jsx)("svg",{width:60,height:14,"aria-hidden":"true",children:(0,a.jsx)("polyline",{points:l,fill:"none",stroke:"currentColor",strokeWidth:"1",opacity:.6})})}(0,n.useEffect)(()=>{if(!V)return;let e=k.trim().toLowerCase();if(!e)return;let t=new Map;for(let n of eX){var s,a,r,l;let i=(null===(a=n.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e,c=(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e;if(!i&&!c)continue;let o=((i?n.winningClasses:n.losingClasses)||"").trim();o&&o.includes("/")&&t.set(o,(t.get(o)||0)+1)}let n=null,i=0;for(let[e,s]of t.entries())s>i&&(n=e,i=s);if(!n){q([]);return}let c=n.split("/").map(e=>e.trim()).filter(Boolean);if(2!==c.length){q([]);return}q(c)},[eX,k,V,t,r]);let tM=(0,n.useMemo)(()=>{let e=r||"",s=C(t||b),a=e?C(e):"latest";return"".concat(s," → ").concat(a)},[t,r]),tL=(0,n.useMemo)(()=>{let e={};for(let l of $){var t,s,a,r;let n="";try{let e=new Date(l.startedAt);isNaN(e.getTime())||(n="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")))}catch(e){}if(!n)continue;e[n]||(e[n]=new Set);let i=null===(s=l.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase(),c=null===(r=l.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase();i&&e[n].add(i),c&&e[n].add(c)}return Object.entries(e).map(e=>{let[t,s]=e;return{day:t,count:s.size}}).sort((e,t)=>e.day.localeCompare(t.day))},[$]),tT=(0,n.useMemo)(()=>{if(0===$.length)return{};let e={...p,...eO},t={};for(let[s,a]of Object.entries(e)){let e=a.toLowerCase();t[e]||(t[e]=[]),t[e].push(s.toLowerCase())}let s={};for(let e of $){var a,r,l;let n=null===(a=e.winningPlayer)||void 0===a?void 0:a.trim();if(!n)continue;let i=t[n.toLowerCase()];if(!i||0===i.length)continue;let c=(null!==(r=e.winningClasses)&&void 0!==r?r:"").trim();if(c)for(let e of i)s[e]||(s[e]={}),s[e][c]=(null!==(l=s[e][c])&&void 0!==l?l:0)+1}let n={};for(let[e,t]of Object.entries(s)){let s=Object.entries(t).sort((e,t)=>t[1]-e[1]),a=s.reduce((e,t)=>{let[,s]=t;return e+s},0);if(0===s.length)continue;let r=s[0];s.length>1&&s[1][1]>=.2*a?n[e]="".concat(r[0],", ").concat(s[1][0]):n[e]=r[0]}return n},[$,eO]);(0,n.useEffect)(()=>{if(Object.keys(tT).length>0){let e={...e_,...tT};eR(e);try{localStorage.setItem("dominantClasses",JSON.stringify(e))}catch(e){}}},[tT]);let tD=(0,n.useMemo)(()=>({...e_,...tT}),[e_,tT]),tB=(0,n.useMemo)(()=>{var e,t,s,a,r,l,n;let i=k.trim().toLowerCase(),c=V?eX.filter(e=>{var t,s,a,r;return(null===(s=e.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())===i||(null===(r=e.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())===i}):eX,o=new Set,d={};for(let a of c){let r=(null!==(e=a.winningClasses)&&void 0!==e?e:"").trim(),l=(null!==(t=a.losingClasses)&&void 0!==t?t:"").trim();r&&l&&r.includes("/")&&l.includes("/")&&(o.add(r),o.add(l),d[r]||(d[r]={}),d[r][l]=(null!==(s=d[r][l])&&void 0!==s?s:0)+1)}let x=Array.from(o).sort(),m={};for(let e of x){let t=[];for(let s of x){if(e===s)continue;let i=null!==(l=null===(a=d[e])||void 0===a?void 0:a[s])&&void 0!==l?l:0,c=null!==(n=null===(r=d[s])||void 0===r?void 0:r[e])&&void 0!==n?n:0,o=i+c;0!==o&&t.push({opponent:s,wins:i,losses:c,total:o,winRate:i/o})}t.sort((e,t)=>t.total-e.total),m[e]=t}return{classes:x,matchups:m}},[eX,k,V]),tE=(0,n.useMemo)(()=>2!==Y.length?"":[...Y].sort().join("/"),[Y]),tA=e=>{q(t=>t.includes(e)?t.filter(t=>t!==e):t.length<2?[...t,e]:[t[1],e])},tU=(0,n.useMemo)(()=>{let e=new Map;for(let l of eX){var t,s,a,r;let n=(null!==(t=l.winningClasses)&&void 0!==t?t:"").trim(),i=(null!==(s=l.losingClasses)&&void 0!==s?s:"").trim(),c=(null!==(a=l.winningPlayer)&&void 0!==a?a:"").trim().toLowerCase(),o=(null!==(r=l.losingPlayer)&&void 0!==r?r:"").trim().toLowerCase();if(n&&n.includes("/")&&c){e.has(n)||e.set(n,new Map);let t=e.get(n),s=t.get(c)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,t.set(c,s)}if(i&&i.includes("/")&&o){e.has(i)||e.set(i,new Map);let t=e.get(i),s=t.get(o)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,t.set(o,s)}}let l=[];for(let[t,s]of e.entries()){let e=null;for(let[t,a]of s.entries()){if(a.total<25)continue;let s=a.wins/a.total;(!e||s>e.winrate||s===e.winrate&&a.total>e.total)&&(e={player:t,wins:a.wins,losses:a.losses,total:a.total,winrate:s})}e&&l.push({klass:t,...e})}return l.sort((e,t)=>t.winrate-e.winrate||t.total-e.total||e.klass.localeCompare(t.klass))},[eX]),tF=e=>{let t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate());if("today"===e)s(N(a)<b?b:N(a)),f(N(a));else if("last7"===e){let e=new Date(a);e.setDate(e.getDate()-6),s(N(e)<b?b:N(e)),f(N(a))}else if("last30"===e){let e=new Date(a);e.setDate(e.getDate()-29),s(N(e)<b?b:N(e)),f(N(a))}else if("thisMonth"===e){let e=new Date(a.getFullYear(),a.getMonth(),1);s(N(e)<b?b:N(e)),f(N(a))}else if("prevMonth"===e){let e=new Date(a.getFullYear(),a.getMonth()-1,1),t=new Date(a.getFullYear(),a.getMonth(),0);s(N(e)<b?b:N(e)),f(N(t))}else"allTime"===e?(s(b),f("")):"sincePatch"===e&&(s(y),f(""))},t_=async()=>{Z(null),z(null),H([]),R(!0),eG("idle");try{let e={startTs:t===y?1768392e3:S(t),endTs:P(r),wantAgg:!0,live:!1,cacheOnly:!0},s=await fetch("/api/eth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("HTTP ".concat(s.status,": ").concat(s.statusText));let a=await s.json();if(!a.ok)throw Error(a.error||"Unknown error");a.warning&&z(a.warning);let l=(a.rows||[]).map(e=>({...e,winningPlayer:j(e.winningPlayer),losingPlayer:j(e.losingPlayer)}));H(l);let n=new Set(ei);for(let e of l)n.add((e.winningPlayer||"").trim()),n.add((e.losingPlayer||"").trim());let i=Array.from(n).filter(Boolean).slice(0,200);ec(i);try{localStorage.setItem("recentPlayers",JSON.stringify(i))}catch(e){}eh(a.aggByClass||null),ep(a.aggLastUpdate||null),eJ(!1),eG("cached"),ew||0!==ef.length||tJ();let c=new Date,o=Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate())/1e3,d=P(r),x=Math.floor(new Date("2026-01-15T11:49:24Z").getTime()/1e3);(void 0===d||d>=o||void 0===d||d>x)&&tO()}catch(e){Z((null==e?void 0:e.message)||String(e))}finally{R(!1)}},tR=Math.floor(new Date("2026-01-15T11:49:24Z").getTime()/1e3),tO=async()=>{Z(null),z(null),R(!0);try{let e=t===y?1768392e3:S(t),s=new Date,a=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate())/1e3,l=P(r),n=(void 0===l||l>tR)&&(e||0)<=(l||Date.now()/1e3),i=await fetch("/api/eth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTs:n?Math.max(e||0,tR+1):Math.max(e||0,a),endTs:l,wantAgg:!0,live:!0,cacheOnly:!1})});if(!i.ok)throw Error("HTTP ".concat(i.status,": ").concat(i.statusText));let c=await i.json();if(!c.ok)throw Error(c.error||"Unknown error");c.warning&&z(c.warning);let o=(c.rows||[]).map(e=>({...e,winningPlayer:j(e.winningPlayer),losingPlayer:j(e.losingPlayer)}));H(e=>(function(e,t){let s=new Map;for(let t of e){let e="number"==typeof t.logIndex?"".concat(t.txHash,":").concat(t.logIndex):t.gameId?"gid:".concat(t.gameId):"".concat(t.txHash,":").concat(t.blockNumber);s.set(e,t)}for(let e of t){let t="number"==typeof e.logIndex?"".concat(e.txHash,":").concat(e.logIndex):e.gameId?"gid:".concat(e.gameId):"".concat(e.txHash,":").concat(e.blockNumber);s.set(t,e)}return Array.from(s.values())})(e,o)),eh(c.aggByClass||null),ep(c.aggLastUpdate||null),eJ(!0),eG("live")}catch(e){Z((null==e?void 0:e.message)||String(e))}finally{R(!1)}},[tZ,tI]=(0,n.useState)(0),[tz,t$]=(0,n.useState)(""),tH=async(e,t)=>{let s=await fetch("https://mainnet.megaeth.com/rpc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})}),a=await s.json();if(a.error)throw Error(a.error.message||"RPC error");return a.result},tV=async e=>{try{t$("Syncing from browser...");let t="0x7b8df4195eda5b193304eecb5107de18b6557d24",s=await tH("eth_blockNumber",[]),a=parseInt(s,16),r=Math.max(e+1,5721028);if(r>=a)return t$("Up to date"),null;t$("Browser sync: blocks ".concat(r.toLocaleString()," to ").concat(a.toLocaleString(),"..."));let l=(await tH("eth_getLogs",[{fromBlock:"0x"+r.toString(16),toBlock:"0x"+a.toString(16),address:"0xfafddbb3fc7688494971a79cc65dca3ef82079e7",topics:["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"]}])||[]).filter(e=>{var s,a;let r=null===(s=e.topics[1])||void 0===s?void 0:s.slice(-40).toLowerCase(),l=null===(a=e.topics[2])||void 0===a?void 0:a.slice(-40).toLowerCase();return r===t.slice(2)||l===t.slice(2)});if(0===l.length)return t$("No new transfers"),null;let n=BigInt(0);for(let e of l)n+=BigInt(e.data);t$("Saving ".concat(l.length," transfers to server..."));try{let e=await fetch("/api/usdm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logs:l,toBlock:a})}),t=await e.json();if(t.ok&&t.saved)return t$("Synced! +".concat(l.length," transfers (saved)")),{totalVolume:t.totalVolume,logs:l.length,toBlock:a,saved:!0}}catch(e){console.warn("Failed to save to server:",e)}return t$("Found ".concat(l.length," new transfers (+$").concat(Math.round(Number(n)/1e18),")")),{newVolume:n.toString(),logs:l.length,toBlock:a}}catch(e){return console.error("Client sync error:",e),t$("Browser sync failed: ".concat((null==e?void 0:e.message)||"Unknown")),null}},tJ=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!ew&&(e||!(ef.length>0)||!eC)){ej(!0),ek(null);try{var t,s,a,r;let l=await fetch(e?"/api/usdm?fresh=1":"/api/usdm");if(!l.ok)throw Error("HTTP ".concat(l.status,": ").concat(l.statusText));let n=await l.json();if(!n.ok)throw Error(n.error||"Unknown error");ev(n.rows||[]),eB(n.rowsWeekly||[]),eA(n.rowsMonthly||[]),eM(n.volumeSeries||[]),eT(n.totalVolume||"0"),eS(n.updatedAt||null),ek(null);let i=null===(t=n.source)||void 0===t?void 0:t.includes("fallback"),c=(null===(s=n.warning)||void 0===s?void 0:s.includes("429"))||(null===(a=n.warning)||void 0===a?void 0:a.toLowerCase().includes("upstream"));if(i&&c&&n.lastBlock){let e=await tV(n.lastBlock);if(e){if(e.saved&&e.totalVolume)eT(e.totalVolume);else if(e.newVolume){let t=BigInt(n.totalVolume||"0")+BigInt(e.newVolume);eT(t.toString())}eS(Date.now()),tI(Date.now()),setTimeout(()=>tJ(!1,!1),1e3);return}}if(n.debug||n.syncedTo){let e=n.latestBlock&&n.syncedTo?n.latestBlock-n.syncedTo:0;if(e>100){let t=n.latestBlock?Math.round(n.syncedTo/n.latestBlock*100):100;t$("Syncing... ".concat(t,"% (").concat(e.toLocaleString()," blocks left)"))}else(null===(r=n.debug)||void 0===r?void 0:r.logsFound)>0?t$("Synced! +".concat(n.debug.logsFound," transfers")):t$("Up to date")}else i&&c&&t$("Server busy, will try browser sync...");let o=n.latestBlock&&n.syncedTo?n.latestBlock-n.syncedTo:0;n.needsMoreSync||o>100||i&&c?c?setTimeout(()=>tJ(!0,!0),15e3):setTimeout(()=>tJ(!0,!0),2e3):(tI(Date.now()),t$(""))}catch(t){let e=(null==t?void 0:t.message)||String(t);e.includes("429")||e.toLowerCase().includes("upstream")?(t$("RPC busy, retrying in 15s..."),setTimeout(()=>tJ(!0,!0),15e3)):eC&&Date.now()-eC<3e5||ek(e)}finally{ej(!1)}}},tW=(e,t)=>{let s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=e,r.click(),URL.revokeObjectURL(a)},tG=e=>{if(!e)return null;try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}},tY=(e,t)=>"https://megaeth.blockscout.com/tx/".concat(e,"?tab=logs"),tq=(e,t)=>{let s=(null==t?void 0:t.map(e=>e.key))||(e[0]?Object.keys(e[0]):[]);return[((null==t?void 0:t.map(e=>e.label))||s).join(","),...e.map(e=>s.map(t=>{let s=e[t],a=null==s?"":String(s),r='"'+a.replace(/"/g,'""')+'"';return/[",\n]/.test(a)?r:a}).join(","))].join("\n")},tK=(e,t,s)=>{let a=new Blob([tq(t,s)],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-gray-100",children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Showdown Meta Tracker"})}),(0,a.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-10",children:[(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-[#1a1a1a] text-gray-500 px-4 py-2 text-xs border border-gray-800",children:["vibecoded by"," ",(0,a.jsx)("a",{className:"text-gray-400 hover:text-gray-300",href:"https://x.com/fisiroky",target:"_blank",rel:"noreferrer",children:"@fisiroky"}),(0,a.jsx)("span",{className:"mx-2 text-gray-600",children:"|"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Track the meta, find your edge."})," ",(0,a.jsx)("span",{className:"text-gray-500",children:"Built on fully transparent onchain MegaETH data."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"/images/showdown_small.jpg",alt:"Showdown logo",className:"h-10 w-10 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.E.h1,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"text-2xl font-bold tracking-wide text-red-500 uppercase",children:"Showdown"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Meta Tracker"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("a",{href:"https://alpha.showdown.game/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-500 text-white px-5 py-2.5 text-sm font-bold uppercase tracking-wide transition-colors",children:"Play Now"})})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-[#141414] p-5 lg:sticky lg:top-4 z-20 border border-gray-800/60",children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400 mb-4",children:"Filters"}),(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"Player Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:k,onChange:e=>{B(e.target.value),ee(!0)},onFocus:()=>{es(!0),ee(!0)},onBlur:()=>{es(!1),setTimeout(()=>ee(!1),150)},placeholder:"Enter player name"}),Q&&et&&ei.length>0&&(0,a.jsxs)("div",{className:"absolute z-30 mt-1 w-full max-h-48 overflow-y-auto rounded-lg border border-gray-700/60 bg-[#1c1c1c] shadow-xl",children:[ei.filter(e=>e.toLowerCase().includes(k.toLowerCase())).slice(0,10).map(e=>(0,a.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-[#282828] first:rounded-t-lg last:rounded-b-lg",onMouseDown:()=>{B(e),ee(!1)},children:e},e)),0===ei.filter(e=>e.toLowerCase().includes(k.toLowerCase())).length&&(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No matching players"})]})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"Start date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500"}),(0,a.jsx)("input",{type:"text",placeholder:"2026-Jan-13",className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 pl-8 pr-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:v(t),onChange:e=>s(w(e.target.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"End date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Latest",className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 pl-8 pr-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:r?v(r):"",onChange:e=>f(w(e.target.value))})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-[11px] text-gray-500 mr-1",children:"Presets:"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tF("sincePatch"),children:"Since last patch"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tF("thisMonth"),children:"This month"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tF("allTime"),children:"All time"})]}),(0,a.jsxs)("button",{onClick:()=>t_(),disabled:_,className:"mt-5 w-full inline-flex items-center justify-center gap-2 bg-red-600 hover:bg-red-500 rounded-lg px-4 py-3 text-sm text-white font-semibold uppercase tracking-wide transition-colors disabled:opacity-50",children:[_?(0,a.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"h-4 w-4"}),_?"Loading...":"Analyze"]}),(0,a.jsxs)("button",{onClick:()=>tO(),disabled:_||0===$.length,className:"mt-2 w-full inline-flex items-center justify-center gap-2 bg-[#1c1c1c] hover:bg-[#282828] rounded-lg px-4 py-2.5 text-sm text-gray-400 hover:text-white transition-colors disabled:opacity-40",children:[_?(0,a.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Refresh"]}),$.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["cached"===eW&&"Showing cached data through ".concat(e1,". Fetching today now…"),"live"===eW&&"Updated with today’s matches. Cached through ".concat(e1,"."),"idle"===eW&&"Showing cached data through ".concat(e1,".")]}),O&&(0,a.jsx)("div",{className:"rounded-lg bg-red-900/20 border border-red-800/50 p-3 text-xs text-red-400",children:O}),I&&!O&&(0,a.jsx)("div",{className:"rounded-lg bg-amber-900/20 border border-amber-800/50 p-3 text-xs text-amber-400",children:I}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"text-[11px] text-gray-400 mb-2",children:"Player Experience"}),(()=>{let e={all:$.length,pro:0,mixed:0,beginnerVsBeginner:0};for(let a of $){var t,s,r,l;let n=(null===(s=a.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())||"",i=(null===(l=a.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())||"",c=eq[n]||0,o=eq[i]||0,d=c>=25,x=o>=25;d&&x?e.pro++:d&&!x||!d&&x?e.mixed++:e.beginnerVsBeginner++}return(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1.5",children:[(0,a.jsxs)("button",{onClick:()=>G("all"),className:"rounded-lg px-2.5 py-2 text-[11px] transition-colors border ".concat("all"===W?"bg-gray-700 text-white border-gray-600":"bg-[#1c1c1c] text-gray-400 hover:bg-[#282828] hover:text-white border-transparent"),children:["All Games ",(0,a.jsxs)("span",{className:"opacity-60",children:["(",e.all,")"]})]}),(0,a.jsxs)("button",{onClick:()=>G("pro"),disabled:0===e.pro,className:"rounded-lg px-2.5 py-2 text-[11px] transition-colors border ".concat("pro"===W?"bg-blue-900/60 text-blue-300 border-blue-700/50":0===e.pro?"bg-[#1c1c1c] text-gray-600 border-transparent cursor-not-allowed":"bg-[#1c1c1c] text-gray-400 hover:bg-blue-900/30 hover:text-blue-300 border-transparent"),children:["Pro vs Pro ",(0,a.jsxs)("span",{className:"opacity-60",children:["(",e.pro,")"]})]}),(0,a.jsxs)("button",{onClick:()=>G("mixed"),disabled:0===e.mixed,className:"rounded-lg px-2.5 py-2 text-[11px] transition-colors border ".concat("mixed"===W?"bg-purple-900/60 text-purple-300 border-purple-700/50":0===e.mixed?"bg-[#1c1c1c] text-gray-600 border-transparent cursor-not-allowed":"bg-[#1c1c1c] text-gray-400 hover:bg-purple-900/30 hover:text-purple-300 border-transparent"),children:["Pro vs Beginner ",(0,a.jsxs)("span",{className:"opacity-60",children:["(",e.mixed,")"]})]}),(0,a.jsxs)("button",{onClick:()=>G("beginnerVsBeginner"),disabled:0===e.beginnerVsBeginner,className:"rounded-lg px-2.5 py-2 text-[11px] transition-colors border ".concat("beginnerVsBeginner"===W?"bg-green-900/60 text-green-300 border-green-700/50":0===e.beginnerVsBeginner?"bg-[#1c1c1c] text-gray-600 border-transparent cursor-not-allowed":"bg-[#1c1c1c] text-gray-400 hover:bg-green-900/30 hover:text-green-300 border-transparent"),children:["Beginner vs Beginner ",(0,a.jsxs)("span",{className:"opacity-60",children:["(",e.beginnerVsBeginner,")"]})]})]})})(),(0,a.jsxs)("div",{className:"mt-2 text-[10px] text-gray-500 text-center",children:["all"===W&&"Showing all games regardless of experience","pro"===W&&"Both players have 25+ total games","mixed"===W&&"One experienced + one newer player","beginnerVsBeginner"===W&&"Both players have <25 total games"]})]})]}),(0,a.jsxs)("div",{id:"top-usdm-profits",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400",children:"Top Earners"}),(0,a.jsx)("div",{className:"text-[10px] text-gray-500 mt-1",children:eC&&(()=>{let e=Math.floor((Date.now()-eC)/6e4),t=Math.floor(e/60),s=t>0?"".concat(t,"h ").concat(e%60,"m ago"):e>0?"".concat(e,"m ago"):"just now",r=e>30;return(0,a.jsxs)("span",{className:r?"text-amber-500":"",children:[new Date(eC).toLocaleString()," (",s,")"]})})()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-gray-400",children:"Total Volume"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-500 mt-0.5",children:M(eL)})]})]}),(0,a.jsxs)("button",{onClick:()=>tJ(!0),disabled:ew,className:"w-full mb-2 inline-flex items-center justify-center gap-2 bg-red-600/80 hover:bg-red-600 rounded-lg px-3 py-2 text-xs text-white font-medium transition-colors disabled:opacity-40",children:[ew?(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5 animate-spin"}):(0,a.jsx)(m.Z,{className:"h-3.5 w-3.5"}),ew?"Syncing...":"Refresh"]}),(0,a.jsx)("div",{className:"flex gap-1 mb-2",children:["weekly","monthly","all"].map(e=>(0,a.jsx)("button",{onClick:()=>eF(e),className:"flex-1 px-2 py-1.5 rounded text-[10px] font-medium uppercase tracking-wide transition-colors ".concat(eU===e?"bg-red-600/30 text-red-400 border border-red-700/60":"bg-[#1c1c1c] text-gray-500 border border-gray-800/50 hover:text-gray-300"),children:"weekly"===e?"7 days":"monthly"===e?"30 days":"All time"},e))}),tz&&!eN&&(0,a.jsx)("div",{className:"mb-2 text-xs text-yellow-500/80",children:tz}),eN&&(0,a.jsx)("div",{className:"mb-3 rounded-lg p-2.5 text-xs ".concat(0===eY.length?"bg-red-900/20 border border-red-800/50 text-red-400":"bg-amber-900/20 border border-amber-800/50 text-amber-400"),children:eN}),(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-800/50",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs",children:[(0,a.jsx)("thead",{className:"bg-[#1c1c1c]",children:(0,a.jsxs)("tr",{className:"text-gray-400 text-[10px] uppercase tracking-wide",children:[(0,a.jsx)("th",{className:"px-3 py-2.5 w-10 text-center",children:"#"}),(0,a.jsxs)("th",{className:"px-3 py-2.5",children:["Player ",(0,a.jsx)("span",{className:"normal-case text-gray-600 font-normal",children:"(top class)"})]}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-green-500",children:"Profit"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-right",children:"Games"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-800/50",children:[eY.map((e,t)=>{let s=BigInt(e.net||"0"),r=Number((s<0n?-s:s)/0xde0b6b3a7640000n),l=tD[e.player.toLowerCase()];return(0,a.jsxs)("tr",{className:"hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"px-3 py-2.5 text-center text-gray-500",children:t+1}),(0,a.jsxs)("td",{className:"px-3 py-2.5",children:[(0,a.jsx)("a",{className:"text-gray-300 hover:text-white font-mono text-[11px]",href:"https://megaeth.blockscout.com/address/".concat(e.player),target:"_blank",rel:"noreferrer",children:L(e.player)}),l&&(0,a.jsx)("div",{className:"text-[10px] text-blue-400/70 mt-0.5",title:"Most winning class combo",children:l})]}),(0,a.jsx)("td",{className:"px-3 py-2.5 tabular-nums ".concat(s>0n?r>=100?"text-green-400 font-bold":r>=10?"text-green-400 font-semibold":"text-green-400":s<0n?"text-red-400/70":"text-gray-400"),children:M(e.net,!0)}),(0,a.jsx)("td",{className:"px-3 py-2.5 text-right text-gray-500",children:e.txs})]},e.player+t)}),ew&&0===eY.length&&(0,a.jsx)(A,{rows:5,cols:4}),!ew&&0===eY.length&&!eN&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:4,children:"all"===eU?"No data yet":"No data for this period"})})]})]})}),(0,a.jsx)("a",{className:"mt-2 inline-block text-[10px] text-gray-500 hover:text-gray-300 transition-colors",href:"https://megaeth.blockscout.com/address/0x7B8DF4195eda5b193304eeCB5107DE18b6557D24?tab=txs",target:"_blank",rel:"noreferrer",children:"View contract →"})]}),(0,a.jsxs)("div",{id:"tournament-winners",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-amber-400",children:"\uD83C\uDFC6 Tournament Winners"}),(0,a.jsx)("div",{className:"text-[10px] text-gray-500 mt-1",children:"Freeroll prizes"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-gray-400",children:"Total Prizes"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-amber-400 mt-0.5",children:["$",D.toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-800/50",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs",children:[(0,a.jsx)("thead",{className:"bg-[#1c1c1c]",children:(0,a.jsxs)("tr",{className:"text-gray-400 text-[10px] uppercase tracking-wide",children:[(0,a.jsx)("th",{className:"px-3 py-2.5 w-10 text-center",children:"#"}),(0,a.jsx)("th",{className:"px-3 py-2.5",children:"Player"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-amber-400",children:"Prize"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-800/50",children:T.map(e=>{let t=1===e.rank?"text-amber-300 font-bold":e.rank<=3?"text-amber-400 font-semibold":"text-amber-400/80",s=1===e.rank?"\uD83E\uDD47":2===e.rank?"\uD83E\uDD48":3===e.rank?"\uD83E\uDD49":e.rank;return(0,a.jsxs)("tr",{className:"hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"px-3 py-2.5 text-center text-gray-500",children:s}),(0,a.jsx)("td",{className:"px-3 py-2.5 font-mono text-[11px]",children:(0,a.jsx)("a",{className:"text-gray-300 hover:text-white",href:"https://megaeth.blockscout.com/address/".concat(e.address),target:"_blank",rel:"noreferrer",children:L(e.address)})}),(0,a.jsx)("td",{className:"px-3 py-2.5 tabular-nums ".concat(t),children:e.display})]},e.address)})})]})}),(0,a.jsx)("div",{className:"mt-2 text-[10px] text-gray-500",children:"Manual payouts until smart contract"})]})]}),(0,a.jsx)("div",{className:"mt-6 rounded-lg bg-[#141414] p-5 border border-gray-800/60",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Wins"}),_&&0===eQ.wins?(0,a.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-green-400",children:eQ.wins})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Losses"}),_&&0===eQ.losses?(0,a.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-red-400",children:eQ.losses})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Win Rate"}),_&&0===eQ.wins&&0===eQ.losses?(0,a.jsx)("div",{className:"mt-1 h-8 w-20 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsxs)("div",{className:"mt-1 text-2xl font-bold text-gray-100",children:[(100*eQ.winrate).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Top Class"}),_&&!eQ.dominantClass?(0,a.jsx)("div",{className:"mt-1 h-6 w-24 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-1 text-sm font-semibold truncate text-gray-100",children:eQ.dominantClass||"—"}),eQ.dominantClass&&(0,a.jsxs)("div",{className:"text-[10px] text-gray-500",children:[Math.round(100*(eQ.dominantClassPct||0)),"% of wins"]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400 mb-3",children:"Jump to"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,a.jsx)("a",{href:"#player-class-stats",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Player stats"}),(0,a.jsx)("a",{href:"#class-vs-class",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Class vs Class"}),(0,a.jsx)("a",{href:"#player-matches",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Matches"}),(0,a.jsx)("a",{href:"#global-class-stats",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Global stats"}),(0,a.jsx)("a",{href:"#top-by-class",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Best by class"}),(0,a.jsx)("a",{href:"#all-decoded",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"All games"}),(0,a.jsx)("a",{href:"#top-usdm-profits",className:"px-3 py-1.5 rounded bg-red-900/30 text-red-400 hover:bg-red-900/50 hover:text-red-300 border border-red-800/50 transition-colors",children:"Top Earners"})]})]}),(0,a.jsxs)("details",{id:"player-section",className:"mt-6",open:!0,children:[(0,a.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-widest font-bold text-gray-400",children:[(0,a.jsx)("span",{children:"Player Analysis"}),(0,a.jsx)("span",{className:"h-px flex-1 bg-gray-800"}),(0,a.jsx)("span",{className:"text-[11px] normal-case font-normal text-red-500",children:k||"select player"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{id:"player-class-stats",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Class Performance — ",(0,a.jsx)("span",{className:"text-red-500",children:k||"—"}),"all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),ty.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tW("showdown_class_stats_"+(k||"player")+".json",ty),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-3.5 w-3.5"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tK("showdown_class_stats_"+(k||"player")+".csv",ty),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-3.5 w-3.5"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-[#1c1c1c]","aria-sort":"klass"===to.key?"asc"===to.dir?"ascending":"descending":"none",onClick:()=>td(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===to.key?"asc"===to.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===to.key?"asc"===to.dir?"ascending":"descending":"none",onClick:()=>td(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===to.key?"asc"===to.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===to.key?"asc"===to.dir?"ascending":"descending":"none",onClick:()=>td(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===to.key?"asc"===to.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===to.key?"asc"===to.dir?"ascending":"descending":"none",onClick:()=>td(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===to.key?"asc"===to.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===to.key?"asc"===to.dir?"ascending":"descending":"none",onClick:()=>td(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===to.key?"asc"===to.dir?"↑":"↓":""]})]})}),(0,a.jsxs)("tbody",{children:[ty.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 sticky left-0 bg-[#141414]",children:e.klass}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,a.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(tP,{data:tS.get(e.klass)||[]})})]})]},e.klass+t)),_&&0===ty.length&&(0,a.jsx)(A,{rows:6,cols:5}),0===ty.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class stats yet — run a query above."})})]})]})})]}),(0,a.jsxs)("div",{id:"class-vs-class",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Class vs Class — Win Rates","all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:V,onChange:e=>J(e.target.checked)}),"Only matches incl. ",(0,a.jsx)("span",{className:"font-semibold",children:k||"player"})]})]}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Shows all matches by default; toggle to limit to matches including the selected player."}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Select 2 classes to form a dual-class"}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:["Bureaucrat","Cheater","Gambler","Inventor","Protector","Rebel"].map(e=>{let t=Y.includes(e);return(0,a.jsx)("button",{onClick:()=>tA(e),className:"px-2 py-2 sm:px-4 rounded-lg text-xs sm:text-sm font-medium transition-all ".concat(t?"bg-red-600 text-white shadow-md ring-2 ring-red-400":"bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:scale-105"),children:e},e)})}),1===Y.length&&(0,a.jsx)("div",{className:"mt-2 text-xs text-amber-400",children:"Select one more class to see matchups"})]}),tE&&tB.matchups[tE]&&(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>X(e=>({key:"opponent",dir:"opponent"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Opponent ","opponent"===K.key?"asc"===K.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>X(e=>({key:"winRate",dir:"winRate"===e.key&&"desc"===e.dir?"asc":"desc"})),children:[(0,a.jsx)("span",{className:"font-bold text-blue-400",children:tE})," WR ","winRate"===K.key?"asc"===K.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>X(e=>({key:"wins",dir:"wins"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Wins ","wins"===K.key?"asc"===K.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>X(e=>({key:"losses",dir:"losses"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Losses ","losses"===K.key?"asc"===K.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>X(e=>({key:"total",dir:"total"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Games ","total"===K.key?"asc"===K.dir?"↑":"↓":""]})]})}),(0,a.jsx)("tbody",{children:0===tB.matchups[tE].length?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{className:"p-4 text-center text-gray-500",colSpan:5,children:["No matchup data for ",tE,"."]})}):[...tB.matchups[tE]].sort((e,t)=>{let s="asc"===K.dir?1:-1;return"opponent"===K.key?s*e.opponent.localeCompare(t.opponent):"winRate"===K.key?s*(e.winRate-t.winRate):"wins"===K.key?s*(e.wins-t.wins):"losses"===K.key?s*(e.losses-t.losses):s*(e.total-t.total)}).map(e=>{let t=Math.round(120*e.winRate);return(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:e.opponent}),(0,a.jsx)("td",{className:"p-2 text-center",children:(0,a.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(t,", 60%, 45%)")},children:[(100*e.winRate).toFixed(0),"%"]})}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums text-green-400",children:e.wins}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums text-red-400",children:e.losses}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total})]},e.opponent)})})]})})}),tE&&!tB.matchups[tE]&&tB.classes.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-lg border-gray-700",children:["No data found for ",(0,a.jsx)("span",{className:"font-semibold",children:tE})," in the current dataset"]}),!tE&&tB.classes.length>0&&(0,a.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-lg border-gray-700",children:"Select 2 classes above to see matchup win rates"}),0===tB.classes.length&&(0,a.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm",children:_?"Loading...":"No dual-class data yet — run a query above."})]}),(0,a.jsxs)("div",{id:"player-matches",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Matches — ",(0,a.jsx)("span",{className:"text-red-500",children:k||"—"}),(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",e2.length,")"]}),"all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),e2.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tW("showdown_matches_for_"+(k||"player")+".json",e2),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tK("showdown_matches_for_"+(k||"player")+".csv",e2),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===tl.key?"asc"===tl.dir?"ascending":"descending":"none",onClick:()=>tn(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===tl.key?"asc"===tl.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-20 cursor-pointer","aria-sort":"result"===tl.key?"asc"===tl.dir?"ascending":"descending":"none",onClick:()=>tn(e=>({key:"result",dir:"result"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Result ","result"===tl.key?"asc"===tl.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>tn(e=>({key:"opponent",dir:"opponent"==e.key&&"asc"===e.dir?"desc":"asc"})),children:"Opponent"}),(0,a.jsx)("th",{className:"p-2 w-44",children:"Player class"}),(0,a.jsx)("th",{className:"p-2 w-44",children:"Opponent class"}),(0,a.jsx)("th",{className:"p-2 w-24",children:"Duration"}),(0,a.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===tl.key?"asc"===tl.dir?"ascending":"descending":"none",onClick:()=>tn(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===tl.key?"asc"===tl.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,a.jsxs)("tbody",{children:[th.map((e,t)=>(tG(e.metadata),(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors cursor-pointer",onClick:()=>tp(e.txHash),children:[(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,a.jsx)("td",{className:"p-2 font-medium",children:e.result}),(0,a.jsx)("td",{className:"p-2",children:e.opponent}),(0,a.jsx)("td",{className:"p-2",children:e.playerClasses}),(0,a.jsx)("td",{className:"p-2",children:e.opponentClasses}),(0,a.jsx)("td",{className:"p-2",children:e.gameLength||"—"}),(0,a.jsx)("td",{className:"p-2",children:e.startedAt}),(0,a.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("a",{className:"text-blue-600 underline",href:tY(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,a.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>tu(e.txHash),children:ea===e.txHash?(0,a.jsx)(h.Z,{className:"h-3 w-3"}):(0,a.jsx)(u.Z,{className:"h-3 w-3"})})]})]}),eo.has(e.txHash)&&(0,a.jsx)("tr",{className:"border-b border-gray-700 bg-[#1a1a1a]",children:(0,a.jsx)("td",{colSpan:8,className:"p-3 text-xs",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Player class:"})," ",e.playerClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Opponent class:"})," ",e.opponentClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength||"—"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+t))),0===e2.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:8,children:_?(0,a.jsx)(A,{rows:8,cols:7}):"No matches for this player in range ".concat(tM," yet.")})})]})]})}),e2.length>e6&&(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>e8(e=>Math.max(1,e-1)),disabled:1===e3,children:"Prev"}),(0,a.jsxs)("div",{children:["Page ",e3," / ",Math.ceil(e2.length/e6)]}),(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>e8(e=>Math.min(Math.ceil(e2.length/e6),e+1)),disabled:e3>=Math.ceil(e2.length/e6),children:"Next"}),(0,a.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",value:e6,onChange:e=>e9(Number(e.target.value)),children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:15,children:"15"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]}),(0,a.jsx)("input",{value:tt,onChange:e=>ts(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(tt||"1",10);isNaN(e)||e8(Math.min(Math.max(1,e),Math.ceil(e2.length/e6)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",placeholder:"Go"})]})]})]})]}),(0,a.jsxs)("details",{id:"global-section",className:"mt-10",open:!0,children:[(0,a.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-widest font-bold text-gray-400",children:[(0,a.jsx)("span",{children:"Global Meta"}),(0,a.jsx)("span",{className:"h-px flex-1 bg-gray-800"}),(0,a.jsx)("span",{className:"text-[11px] normal-case font-normal text-gray-500",children:tM})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{id:"global-class-stats",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Class Performance — All Matches",(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",tM,")"]}),"all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),tf.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tW("showdown_class_stats_all.json",tf),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tK("showdown_class_stats_all.csv",tf),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-1 text-[10px] text-gray-500",children:eu?"Aggregates last updated ".concat(new Date(eu).toLocaleString()):""}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-[#1c1c1c]","aria-sort":"klass"===ti.key?"asc"===ti.dir?"ascending":"descending":"none",onClick:()=>tc(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===ti.key?"asc"===ti.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===ti.key?"asc"===ti.dir?"ascending":"descending":"none",onClick:()=>tc(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===ti.key?"asc"===ti.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===ti.key?"asc"===ti.dir?"ascending":"descending":"none",onClick:()=>tc(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===ti.key?"asc"===ti.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===ti.key?"asc"===ti.dir?"ascending":"descending":"none",onClick:()=>tc(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===ti.key?"asc"===ti.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===ti.key?"asc"===ti.dir?"ascending":"descending":"none",onClick:()=>tc(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===ti.key?"asc"===ti.dir?"↑":"↓":""]})]})}),(0,a.jsxs)("tbody",{children:[tf.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 sticky left-0 bg-[#141414]",children:e.klass}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,a.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(tP,{data:tk.get(e.klass)||[]})})]})]},e.klass+t)),_&&0===tf.length&&(0,a.jsx)(A,{rows:6,cols:5}),0===tf.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No data yet — run a query above."})})]})]})})]}),(0,a.jsxs)("div",{id:"top-by-class",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Best Player by Class",(0,a.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(min 25 games)"}),"all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),tU.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("button",{onClick:()=>tW("showdown_top_by_class.json",tU),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," JSON"]})})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsx)("th",{className:"p-2",children:"Class"}),(0,a.jsx)("th",{className:"p-2",children:"Best Player"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"W/L"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"Games"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"Win Rate"})]})}),(0,a.jsxs)("tbody",{children:[tU.map(e=>{let t=Math.round(120*e.winrate);return(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:e.klass}),(0,a.jsx)("td",{className:"p-2",children:e.player}),(0,a.jsxs)("td",{className:"p-2 text-center tabular-nums",children:[(0,a.jsx)("span",{className:"text-green-400",children:e.wins}),(0,a.jsx)("span",{className:"text-gray-400 mx-1",children:"/"}),(0,a.jsx)("span",{className:"text-red-400",children:e.losses})]}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total}),(0,a.jsx)("td",{className:"p-2 text-center",children:(0,a.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(t,", 60%, 45%)")},children:[(100*e.winrate).toFixed(0),"%"]})})]},e.klass)}),_&&0===tU.length&&(0,a.jsx)(A,{rows:5,cols:5}),!_&&0===tU.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class data available yet."})})]})]})})]}),(0,a.jsxs)("div",{id:"all-decoded",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["All Games",(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(","all"===W?$.length:eK.length,")"]}),"all"!==W&&(0,a.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded ".concat("pro"===W?"bg-blue-900/50 text-blue-400":"mixed"===W?"bg-purple-900/50 text-purple-400":"bg-green-900/50 text-green-400"),children:"pro"===W?"Pro vs Pro":"mixed"===W?"Pro vs Beginner":"Beginner vs Beginner"})]}),$.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tW("showdown_winrate_results.json",$),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tK("showdown_winrate_results.csv",$),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===ta.key?"asc"===ta.dir?"ascending":"descending":"none",onClick:()=>tr(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===ta.key?"asc"===ta.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40",children:"Game ID"}),(0,a.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===ta.key?"asc"===ta.dir?"ascending":"descending":"none",onClick:()=>tr(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===ta.key?"asc"===ta.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>tr(e=>({key:"winningPlayer",dir:"winningPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Winner"}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>tr(e=>({key:"losingPlayer",dir:"losingPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Loser"}),(0,a.jsx)("th",{className:"p-2 w-36",children:"Reason"}),(0,a.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,a.jsxs)("tbody",{children:[tm.map((e,t)=>(tG(e.metadata),(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors cursor-pointer",onClick:()=>tb(e.txHash),children:[(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,a.jsx)("td",{className:"p-2",children:e.gameId}),(0,a.jsx)("td",{className:"p-2",children:e.startedAt}),(0,a.jsx)("td",{className:"p-2 font-medium",children:e.winningPlayer}),(0,a.jsx)("td",{className:"p-2",children:e.losingPlayer}),(0,a.jsx)("td",{className:"p-2",children:e.endReason}),(0,a.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("a",{className:"text-blue-600 underline",href:tY(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,a.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>tu(e.txHash),children:ea===e.txHash?(0,a.jsx)(h.Z,{className:"h-3 w-3"}):(0,a.jsx)(u.Z,{className:"h-3 w-3"})})]})]}),ex.has(e.txHash)&&(0,a.jsx)("tr",{className:"border-b border-gray-700 bg-[#1a1a1a]",children:(0,a.jsx)("td",{colSpan:7,className:"p-3 text-xs",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Winning classes:"})," ",e.winningClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Losing classes:"})," ",e.losingClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+t))),0===$.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:7,children:_?(0,a.jsx)(A,{rows:10,cols:7}):"No rows for range ".concat(tM,". Pick a different date range and click Compute.")})})]})]})}),$.length>e6&&(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>e4(e=>Math.max(1,e-1)),disabled:1===e5,children:"Prev"}),(0,a.jsxs)("div",{children:["Page ",e5," / ",Math.ceil($.length/e6)]}),(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>e4(e=>Math.min(Math.ceil($.length/e6),e+1)),disabled:e5>=Math.ceil($.length/e6),children:"Next"}),(0,a.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",value:e6,onChange:e=>e9(Number(e.target.value)),children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:15,children:"15"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]}),(0,a.jsx)("input",{value:e7,onChange:e=>te(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(e7||"1",10);isNaN(e)||e4(Math.min(Math.max(1,e),Math.ceil($.length/e6)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",placeholder:"Go"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:"Daily cache on the server makes historical queries instant; today is fetched incrementally."}),tL.length>0&&(()=>{let e=Math.max(...tL.map(e=>e.count),1);return(0,a.jsxs)("div",{className:"mt-6 rounded-lg bg-[#141414] p-3 sm:p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200 mb-3 sm:mb-4",children:["Daily Active Users",(0,a.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(unique players per day)"})]}),(0,a.jsx)("div",{ref:F,className:"overflow-x-auto pb-2 -mx-1",children:(()=>{let t=tL.length,s=t<=7?40:t<=15?32:t<=30?24:t<=60?18:14,r=s<=18?1:3,l=t<=10?1:t<=20?2:t<=40?3:t<=80?5:7,n=t*(s+r);return(0,a.jsx)("div",{className:"flex items-end",style:{height:200,minWidth:Math.max(n,280),gap:r},children:tL.map((r,n)=>{let i=Math.max(r.count/e*160,3),c=r.day===new Date().toISOString().slice(0,10);return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-end",style:{width:s,minWidth:s,height:"100%"},children:[(0,a.jsx)("div",{className:"text-[9px] sm:text-[10px] text-gray-300 mb-0.5 font-medium leading-none",style:{flexShrink:0},children:r.count}),(0,a.jsx)("div",{className:"rounded-t transition-all ".concat(c?"bg-red-500":"bg-blue-500 hover:bg-blue-400"),style:{height:i,width:"80%",flexShrink:0,minHeight:3},title:"".concat(r.day,": ").concat(r.count," players")}),(0,a.jsx)("div",{className:"text-[8px] sm:text-[10px] mt-1 text-gray-400 whitespace-nowrap leading-none ".concat(n%l==0||n===t-1||c?"":"invisible"),style:{flexShrink:0},children:r.day.slice(5)})]},r.day)})})})()}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[10px] sm:text-xs text-gray-500 border-t border-gray-800 pt-2 sm:pt-3",children:[(0,a.jsxs)("div",{children:["Total: ",tL.length,"d"]}),(0,a.jsxs)("div",{children:["Avg: ",(tL.reduce((e,t)=>e+t.count,0)/tL.length).toFixed(1),"/day"]}),(0,a.jsxs)("div",{children:["Peak: ",e]})]})]})})()]}),ea&&(0,a.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-30 rounded-full bg-gray-100 text-gray-900 px-3 py-1 text-xs shadow",children:["Copied tx: ",ea.slice(0,10),"…"]}),(0,a.jsx)(E,{visible:el})]})}function E(e){let{visible:t}=e;return t?(0,a.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-6 right-6 z-20 rounded-full bg-[#1c1c1c] text-white p-3 shadow-lg border border-gray-700/60 hover:bg-[#282828] transition-colors",title:"Back to top",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}):null}function A(e){let{rows:t,cols:s}=e,r=Array.from({length:t}),l=Array.from({length:s});return(0,a.jsx)(a.Fragment,{children:r.map((e,t)=>(0,a.jsx)("tr",{className:"animate-pulse",children:l.map((e,t)=>(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("div",{className:"h-3 rounded bg-gray-700"})},t))},t))})}}},function(e){e.O(0,[351,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);