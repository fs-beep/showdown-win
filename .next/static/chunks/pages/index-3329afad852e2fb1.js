(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6209)}])},6209:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(5893),r=s(9008),l=s.n(r),n=s(7294),i=s(1163),o=s(1891),c=s(8088),d=s(5197),x=s(5482),m=s(6090),h=s(3552),g=s(3785),u=s(6582);let p="2025-07-25",y="2026-01-13",b=e=>{if(!e)return"";let t=e.trim(),s=t.indexOf("#");return -1===s?t:t.slice(0,s)};function w(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)}function j(e){if(!e)return null;let t=e.trim(),s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(t);return s?{y:Number(s[1]),m:Number(s[2]),d:Number(s[3])}:(s=/^([0-9]{2})\.([0-9]{2})\.([0-9]{4})$/.exec(t))?{y:Number(s[3]),m:Number(s[2]),d:Number(s[1])}:(s=/^([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{4})$/.exec(t))?{y:Number(s[3]),m:Number(s[1]),d:Number(s[2])}:null}function N(e){let t=j(e);if(!t)return e||"";let s=new Date(t.y,t.m-1,t.d);if(isNaN(s.getTime()))return e||"";let a=s.toLocaleString("en-US",{month:"short"}),r=String(t.y).slice(-2);return"".concat(a," ").concat(t.d," ").concat(r)}function f(e){let t=j(e);if(!t)return;let s=Date.UTC(t.y,t.m-1,t.d,0,0,0);if(!isNaN(s))return Math.floor(s/1e3)}function v(e){let t=j(e);if(!t)return;let s=Date.UTC(t.y,t.m-1,t.d,23,59,59);if(!isNaN(s))return Math.floor(s/1e3)}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"$0";let s=BigInt(e),a=Number(((s<0n?-s:s)+0x6f05b59d3b20000n)/0xde0b6b3a7640000n).toLocaleString("en-US");return"".concat(s<0n?"-":t&&s>0n?"+":"","$").concat(a)}function C(){let e=(0,i.useRouter)(),[t,s]=(0,n.useState)(y),[r,j]=(0,n.useState)(""),[C,T]=(0,n.useState)("barry"),L=(0,n.useRef)(!1),[P,D]=(0,n.useState)(!1),[_,U]=(0,n.useState)(null),[A,E]=(0,n.useState)(null),[R,B]=(0,n.useState)([]),[O,Z]=(0,n.useState)(!1),[F,I]=(0,n.useState)("all"),[H,G]=(0,n.useState)([]),[W,J]=(0,n.useState)({key:"total",dir:"desc"}),[V,$]=(0,n.useState)(!1),[Y,z]=(0,n.useState)(!1),[q,X]=(0,n.useState)(null),[K,Q]=(0,n.useState)(!1),[ee,et]=(0,n.useState)([]),[es,ea]=(0,n.useState)(new Set),[er,el]=(0,n.useState)(new Set),[en,ei]=(0,n.useState)(null),[eo,ec]=(0,n.useState)(null),[ed,ex]=(0,n.useState)(""),[em,eh]=(0,n.useState)([]),[eg,eu]=(0,n.useState)(!1),[ep,ey]=(0,n.useState)(null),[eb,ew]=(0,n.useState)(null),[ej,eN]=(0,n.useState)([]),[ef,ev]=(0,n.useState)("0"),[ek,eC]=(0,n.useState)(null),[eS,eM]=(0,n.useState)(!1),[eT,eL]=(0,n.useState)(!1),[eP,eD]=(0,n.useState)("idle");(0,n.useEffect)(()=>{try{"undefined"!=typeof document&&document.documentElement.classList.add("dark");let e=localStorage.getItem("recentPlayers");e&&et(JSON.parse(e))}catch(e){}},[]),(0,n.useEffect)(()=>{0!==em.length||eg||tS()},[!0]),(0,n.useEffect)(()=>{if(L.current||!e.isReady)return;let t=e.query,a="string"==typeof t.start?t.start:void 0,r="string"==typeof t.end?t.end:void 0,l="string"==typeof t.player?t.player:void 0,n="string"==typeof t.only?t.only:void 0;"string"==typeof t.theme&&t.theme;let i="string"==typeof t.compare?t.compare:void 0;a&&s(a),r&&j(r),l&&T(l),"1"===n&&Z(!0),i&&ex(i);let o="string"==typeof t.share?t.share:void 0;o&&(eM(!0),fetch("/api/share?id=".concat(encodeURIComponent(o))).then(e=>e.json()).then(e=>{if(!e.ok)throw Error(e.error||"Failed to load snapshot");let t=e.data||{};t.params&&(t.params.start&&s(t.params.start),void 0!==t.params.end&&j(t.params.end),t.params.player&&T(t.params.player),"1"===t.params.only&&Z(!0),t.params.compare&&ex(t.params.compare)),B(t.rows||[]),ei(t.aggByClass||null),ec(t.aggLastUpdate||null),E(null),U(null)}).catch(e=>U((null==e?void 0:e.message)||String(e))).finally(()=>eM(!1))),L.current=!0},[e.isReady]),(0,n.useEffect)(()=>{if(!L.current)return;let s={};t&&(s.start=t),r&&(s.end=r),C&&(s.player=C),O&&(s.only="1"),ed.trim()&&(s.compare=ed.trim()),e.replace({pathname:e.pathname,query:s},void 0,{shallow:!0})},[t,r,C,ed,O]);let e_=(0,n.useMemo)(()=>{let e={};for(let l of R){var t,s,a,r;let n=(null===(s=l.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())||"",i=(null===(r=l.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())||"";n&&(e[n]=(e[n]||0)+1),i&&(e[i]=(e[i]||0)+1)}return e},[R]),eU=(0,n.useMemo)(()=>"all"===F?R:R.filter(e=>{var t,s,a,r;let l=(null===(s=e.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())||"",n=(null===(r=e.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())||"",i=e_[l]||0,o=e_[n]||0;return"pro"===F?i>=30&&o>=30:i<30||o<30}),[R,F,e_]),eA=(0,n.useMemo)(()=>eU,[eU]),eE=(0,n.useMemo)(()=>{let e=C.trim().toLowerCase(),t=eA.filter(t=>{var s,a;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),s=eA.filter(t=>{var s,a;return(null===(a=t.losingPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),a=t.length,r=s.length,l=a+r,n=new Map;for(let e of t){var i;let t=(null!==(i=e.winningClasses)&&void 0!==i?i:"").trim();t&&n.set(t,(n.get(t)||0)+1)}let o=null,c=0;for(let[e,t]of n.entries())t>c&&(o=e,c=t);let d=a?c/a:0;return{wins:a,losses:r,total:l,winrate:l?a/l:0,dominantClass:o,dominantClassPct:d}},[eA,C]),eR=(0,n.useMemo)(()=>{let e=0;for(let t of R){let s=function(e){if(!e)return null;let t=e.trim(),s=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(t);if(s)return Math.floor(Date.UTC(Number(s[1]),Number(s[2])-1,Number(s[3]),Number(s[4]),Number(s[5]),Number(s[6]))/1e3);let a=Date.parse(t.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(a)?null:Math.floor(a/1e3)}(t.startedAt);s&&s>e&&(e=s)}return e?new Date(1e3*e).toLocaleString():null},[R]),eB=(0,n.useMemo)(()=>{let e=v(r),t=new Date,s=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())/1e3,a=new Date((s-1)*1e3);return eT||e&&!(e>=s)?eR||"latest cached block":a.toLocaleString()},[eR,r,eT]),eO=(0,n.useMemo)(()=>{let e=C.trim().toLowerCase();return eU.filter(t=>{var s,a,r,l;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e||(null===(l=t.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e}).map(t=>{var s,a,r,l,n,i;return{...t,result:(()=>{var s,a;let r=(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e,l=(t.endReason||"").toLowerCase().includes("timeout"),n=r?"Win":"Loss";return l?n+" Timeout":n})(),opponent:(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e?t.losingPlayer:t.winningPlayer,playerClasses:(null===(l=t.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e?t.winningClasses:t.losingClasses,opponentClasses:(null===(i=t.winningPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase())===e?t.losingClasses:t.winningClasses}}).sort((e,t)=>t.blockNumber-e.blockNumber)},[eU,C]);(0,n.useMemo)(()=>{let e=ed.trim().toLowerCase();if(!e)return null;let t=eA.filter(t=>{var s,a;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),s=eA.filter(t=>{var s,a;return(null===(a=t.losingPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e}),a=t.length,r=s.length,l=a+r;return{wins:a,losses:r,total:l,winrate:l?a/l:0}},[eA,ed]),(0,n.useMemo)(()=>{let e=C.trim().toLowerCase(),t=ed.trim().toLowerCase();if(!e||!t)return null;let s=0,a=0;for(let o of eA){var r,l,n,i;let c=null===(l=o.winningPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase(),d=null===(i=o.losingPlayer)||void 0===i?void 0:null===(n=i.trim)||void 0===n?void 0:n.call(i).toLowerCase();c===e&&d===t?s++:c===t&&d===e&&a++}return{p1Wins:s,p2Wins:a,total:s+a}},[eA,C,ed]);let[eZ,eF]=(0,n.useState)(1),[eI,eH]=(0,n.useState)(1),[eG,eW]=(0,n.useState)(5),[eJ,eV]=(0,n.useState)(""),[e$,eY]=(0,n.useState)(""),[ez,eq]=(0,n.useState)({key:"startedAt",dir:"desc"}),[eX,eK]=(0,n.useState)({key:"startedAt",dir:"desc"}),[eQ,e0]=(0,n.useState)({key:"winrate",dir:"desc"}),[e1,e2]=(0,n.useState)({key:"total",dir:"desc"}),e4=(0,n.useMemo)(()=>{let e=R.slice();return e.sort((e,t)=>{let s=ez.key,a=e[s],r=t[s];if("startedAt"===s){let e=e=>{if(!e)return 0;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(Number(t[1]),Number(t[2])-1,Number(t[3]),Number(t[4]),Number(t[5]),Number(t[6]))/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?0:Math.floor(s/1e3)};a=e(a),r=e(r)}let l=a<r?-1:a>r?1:0;return"asc"===ez.dir?l:-l}),e},[R,ez]),e5=(0,n.useMemo)(()=>{let e=(eZ-1)*eG;return e4.slice(e,e+eG)},[e4,eZ,eG]),e3=(0,n.useMemo)(()=>{let e=eO.slice();return e.sort((e,t)=>{let s=eX.key,a=e[s],r=t[s];if("startedAt"===s){let e=e=>{if(!e)return 0;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(Number(t[1]),Number(t[2])-1,Number(t[3]),Number(t[4]),Number(t[5]),Number(t[6]))/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?0:Math.floor(s/1e3)};a=e(a),r=e(r)}let l=a<r?-1:a>r?1:0;return"asc"===eX.dir?l:-l}),e},[eO,eX]),e8=(0,n.useMemo)(()=>{let e=(eI-1)*eG;return e3.slice(e,e+eG)},[e3,eI,eG]);(0,n.useEffect)(()=>{eF(1)},[R,eG]),(0,n.useEffect)(()=>{eH(1)},[eO,eG]),(0,n.useEffect)(()=>{let e=e=>{var t,s;(null===(t=e.target)||void 0===t?void 0:t.tagName)!=="INPUT"&&(null===(s=e.target)||void 0===s?void 0:s.tagName)!=="TEXTAREA"&&("ArrowRight"===e.key&&eF(e=>Math.min(Math.ceil(R.length/eG)||1,e+1)),"ArrowLeft"===e.key&&eF(e=>Math.max(1,e-1)))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[R,eG]),(0,n.useEffect)(()=>{let e=()=>Q(window.scrollY>400);return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]);let e6=async e=>{try{await navigator.clipboard.writeText(e),X(e),setTimeout(()=>X(null),1200)}catch(e){}},e7=e=>{ea(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},e9=e=>{el(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},te=(0,n.useMemo)(()=>{let e=C.trim().toLowerCase(),t=new Map;for(let o of eA){var s,a,r,l,n,i;if((null===(a=o.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e){let e=(null!==(n=o.winningClasses)&&void 0!==n?n:"").trim()||"(unknown)",s=t.get(e)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,t.set(e,s)}else if((null===(l=o.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e){let e=(null!==(i=o.losingClasses)&&void 0!==i?i:"").trim()||"(unknown)",s=t.get(e)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,t.set(e,s)}}let o=Array.from(t.entries()).map(e=>{let[t,s]=e;return{klass:t,...s,winrate:s.total?s.wins/s.total:0}});return o.sort((e,t)=>{let s=e1.key,a=e1.dir,r=e[s]<t[s]?-1:e[s]>t[s]?1:0;return"asc"===a?r:-r}),o},[eA,C,e1]),tt=(0,n.useMemo)(()=>{let e=new Map;for(let a of eA){var t,s;let r=(null!==(t=a.winningClasses)&&void 0!==t?t:"").trim(),l=(null!==(s=a.losingClasses)&&void 0!==s?s:"").trim();if(r){let t=e.get(r)||{wins:0,losses:0,total:0};t.wins+=1,t.total+=1,e.set(r,t)}if(l){let t=e.get(l)||{wins:0,losses:0,total:0};t.losses+=1,t.total+=1,e.set(l,t)}}let a=Array.from(e.entries()).map(e=>{let[t,s]=e;return{klass:t,...s,winrate:s.total?s.wins/s.total:0}});return a.sort((e,t)=>{let s=eQ.key,a=eQ.dir,r=e[s]<t[s]?-1:e[s]>t[s]?1:0;return"asc"===a?r:-r}),a},[eA,eQ]);function ts(e){if(!e)return null;let t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\s*(?:UTC|Z))?$/i.exec(e.trim());if(t)return Math.floor(Date.UTC(+t[1],+t[2]-1,+t[3],+t[4],+t[5],+t[6])/1e3);let s=Date.parse(e.replace(" ","T").replace(/\s*UTC$/i,"Z"));return isNaN(s)?null:Math.floor(s/1e3)}let ta=(0,n.useMemo)(()=>{let e=new Set;for(let t of eA){let s=ts(t.startedAt);null!=s&&e.add(Math.floor(s/86400))}return Array.from(e).sort((e,t)=>e-t)},[eA]),tr=(0,n.useMemo)(()=>{let e=C.trim().toLowerCase(),t=new Set;for(let n of eA){var s,a,r,l;if((null===(a=n.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())!==e&&(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())!==e)continue;let i=ts(n.startedAt);null!=i&&t.add(Math.floor(i/86400))}return Array.from(t).sort((e,t)=>e-t)},[eA,C]);function tl(e,t,s){let a=new Map;s.forEach((e,t)=>a.set(e,t));let r=new Map(t.map(e=>[e,Array(s.length).fill(0)]));for(let t of e){let e=ts(t.startedAt);if(null==e)continue;let s=Math.floor(e/86400),l=a.get(s);if(null==l)continue;let n=(t.winningClasses||"").trim(),i=(t.losingClasses||"").trim();n&&r.has(n)&&(r.get(n)[l]+=1),i&&r.has(i)&&(r.get(i)[l]+=1)}return r}let tn=(0,n.useMemo)(()=>tl(eA,tt.map(e=>e.klass),ta),[eA,tt,ta]),ti=(0,n.useMemo)(()=>{let e=C.trim().toLowerCase();return eA.filter(t=>{var s,a,r,l;return(null===(a=t.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e||(null===(l=t.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e})},[eA,C]),to=(0,n.useMemo)(()=>tl(ti,te.map(e=>e.klass),tr),[ti,te,tr]);function tc(e){let{data:t}=e,s=Math.max(1,...t),r=t.length>1?60/(t.length-1):60,l=t.map((e,t)=>"".concat(t*r,",").concat(14-e/s*14)).join(" ");return(0,a.jsx)("svg",{width:60,height:14,"aria-hidden":"true",children:(0,a.jsx)("polyline",{points:l,fill:"none",stroke:"currentColor",strokeWidth:"1",opacity:.6})})}(0,n.useEffect)(()=>{if(!O)return;let e=C.trim().toLowerCase();if(!e)return;let t=new Map;for(let n of eA){var s,a,r,l;let i=(null===(a=n.winningPlayer)||void 0===a?void 0:null===(s=a.trim)||void 0===s?void 0:s.call(a).toLowerCase())===e,o=(null===(l=n.losingPlayer)||void 0===l?void 0:null===(r=l.trim)||void 0===r?void 0:r.call(l).toLowerCase())===e;if(!i&&!o)continue;let c=((i?n.winningClasses:n.losingClasses)||"").trim();c&&c.includes("/")&&t.set(c,(t.get(c)||0)+1)}let n=null,i=0;for(let[e,s]of t.entries())s>i&&(n=e,i=s);if(!n){G([]);return}let o=n.split("/").map(e=>e.trim()).filter(Boolean);if(2!==o.length){G([]);return}G(o)},[eA,C,O,t,r]);let td=(0,n.useMemo)(()=>{let e=r||"",s=N(t||p),a=e?N(e):"latest";return"".concat(s," → ").concat(a)},[t,r]),tx=(0,n.useMemo)(()=>{var e,t,s,a,r,l,n;let i=C.trim().toLowerCase(),o=O?eA.filter(e=>{var t,s,a,r;return(null===(s=e.winningPlayer)||void 0===s?void 0:null===(t=s.trim)||void 0===t?void 0:t.call(s).toLowerCase())===i||(null===(r=e.losingPlayer)||void 0===r?void 0:null===(a=r.trim)||void 0===a?void 0:a.call(r).toLowerCase())===i}):eA,c=new Set,d={};for(let a of o){let r=(null!==(e=a.winningClasses)&&void 0!==e?e:"").trim(),l=(null!==(t=a.losingClasses)&&void 0!==t?t:"").trim();r&&l&&r.includes("/")&&l.includes("/")&&(c.add(r),c.add(l),d[r]||(d[r]={}),d[r][l]=(null!==(s=d[r][l])&&void 0!==s?s:0)+1)}let x=Array.from(c).sort(),m={};for(let e of x){let t=[];for(let s of x){if(e===s)continue;let i=null!==(l=null===(a=d[e])||void 0===a?void 0:a[s])&&void 0!==l?l:0,o=null!==(n=null===(r=d[s])||void 0===r?void 0:r[e])&&void 0!==n?n:0,c=i+o;0!==c&&t.push({opponent:s,wins:i,losses:o,total:c,winRate:i/c})}t.sort((e,t)=>t.total-e.total),m[e]=t}return{classes:x,matchups:m}},[eA,C,O]),tm=(0,n.useMemo)(()=>2!==H.length?"":[...H].sort().join("/"),[H]),th=e=>{G(t=>t.includes(e)?t.filter(t=>t!==e):t.length<2?[...t,e]:[t[1],e])},tg=(0,n.useMemo)(()=>{let e=new Map;for(let a of eA){var t,s;let r=(null!==(t=a.winningPlayer)&&void 0!==t?t:"").trim(),l=(null!==(s=a.losingPlayer)&&void 0!==s?s:"").trim();if(r){let t=r.toLowerCase(),s=e.get(t)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,e.set(t,s)}if(l){let t=l.toLowerCase(),s=e.get(t)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,e.set(t,s)}}return Array.from(e.entries()).map(e=>{let[t,s]=e;return{player:t,wins:s.wins,losses:s.losses,total:s.total,winrate:s.total?s.wins/s.total:0}}).filter(e=>e.total>=30).sort((e,t)=>t.winrate-e.winrate||t.total-e.total||t.wins-e.wins||e.player.localeCompare(t.player)).slice(0,10)},[eA]),tu=(0,n.useMemo)(()=>{let e=new Map;for(let l of eA){var t,s,a,r;let n=(null!==(t=l.winningClasses)&&void 0!==t?t:"").trim(),i=(null!==(s=l.losingClasses)&&void 0!==s?s:"").trim(),o=(null!==(a=l.winningPlayer)&&void 0!==a?a:"").trim().toLowerCase(),c=(null!==(r=l.losingPlayer)&&void 0!==r?r:"").trim().toLowerCase();if(n&&n.includes("/")&&o){e.has(n)||e.set(n,new Map);let t=e.get(n),s=t.get(o)||{wins:0,losses:0,total:0};s.wins+=1,s.total+=1,t.set(o,s)}if(i&&i.includes("/")&&c){e.has(i)||e.set(i,new Map);let t=e.get(i),s=t.get(c)||{wins:0,losses:0,total:0};s.losses+=1,s.total+=1,t.set(c,s)}}let l=[];for(let[t,s]of e.entries()){let e=null;for(let[t,a]of s.entries()){if(a.total<20)continue;let s=a.wins/a.total;(!e||s>e.winrate||s===e.winrate&&a.total>e.total)&&(e={player:t,wins:a.wins,losses:a.losses,total:a.total,winrate:s})}e&&l.push({klass:t,...e})}return l.sort((e,t)=>t.winrate-e.winrate||t.total-e.total||e.klass.localeCompare(t.klass))},[eA]),tp=e=>{let t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate());if("today"===e)s(w(a)<p?p:w(a)),j(w(a));else if("last7"===e){let e=new Date(a);e.setDate(e.getDate()-6),s(w(e)<p?p:w(e)),j(w(a))}else if("last30"===e){let e=new Date(a);e.setDate(e.getDate()-29),s(w(e)<p?p:w(e)),j(w(a))}else if("thisMonth"===e){let e=new Date(a.getFullYear(),a.getMonth(),1);s(w(e)<p?p:w(e)),j(w(a))}else if("prevMonth"===e){let e=new Date(a.getFullYear(),a.getMonth()-1,1),t=new Date(a.getFullYear(),a.getMonth(),0);s(w(e)<p?p:w(e)),j(w(t))}else"allTime"===e?(s(p),j("")):"sincePatch"===e&&(s(y),j(""))},ty=async()=>{U(null),E(null),B([]),D(!0),eD("idle");try{let e={startTs:t===y?1768392e3:f(t),endTs:v(r),wantAgg:!0,live:!1,cacheOnly:!0},s=await fetch("/api/eth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("HTTP ".concat(s.status,": ").concat(s.statusText));let a=await s.json();if(!a.ok)throw Error(a.error||"Unknown error");a.warning&&E(a.warning);let l=(a.rows||[]).map(e=>({...e,winningPlayer:b(e.winningPlayer),losingPlayer:b(e.losingPlayer)}));B(l);let n=new Set(ee);for(let e of l)n.add((e.winningPlayer||"").trim()),n.add((e.losingPlayer||"").trim());let i=Array.from(n).filter(Boolean).slice(0,200);et(i);try{localStorage.setItem("recentPlayers",JSON.stringify(i))}catch(e){}ei(a.aggByClass||null),ec(a.aggLastUpdate||null),eL(!1),eD("cached"),eg||0!==em.length||tS();let o=new Date,c=Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())/1e3,d=v(r),x=Math.floor(new Date("2026-01-15T11:49:24Z").getTime()/1e3);(void 0===d||d>=c||void 0===d||d>x)&&tw()}catch(e){U((null==e?void 0:e.message)||String(e))}finally{D(!1)}},tb=Math.floor(new Date("2026-01-15T11:49:24Z").getTime()/1e3),tw=async()=>{U(null),E(null),D(!0);try{let e=t===y?1768392e3:f(t),s=new Date,a=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate())/1e3,l=v(r),n=(void 0===l||l>tb)&&(e||0)<=(l||Date.now()/1e3),i=await fetch("/api/eth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTs:n?Math.max(e||0,tb+1):Math.max(e||0,a),endTs:l,wantAgg:!0,live:!0,cacheOnly:!1})});if(!i.ok)throw Error("HTTP ".concat(i.status,": ").concat(i.statusText));let o=await i.json();if(!o.ok)throw Error(o.error||"Unknown error");o.warning&&E(o.warning);let c=(o.rows||[]).map(e=>({...e,winningPlayer:b(e.winningPlayer),losingPlayer:b(e.losingPlayer)}));B(e=>(function(e,t){let s=new Map;for(let t of e){let e="number"==typeof t.logIndex?"".concat(t.txHash,":").concat(t.logIndex):t.gameId?"gid:".concat(t.gameId):"".concat(t.txHash,":").concat(t.blockNumber);s.set(e,t)}for(let e of t){let t="number"==typeof e.logIndex?"".concat(e.txHash,":").concat(e.logIndex):e.gameId?"gid:".concat(e.gameId):"".concat(e.txHash,":").concat(e.blockNumber);s.set(t,e)}return Array.from(s.values())})(e,c)),ei(o.aggByClass||null),ec(o.aggLastUpdate||null),eL(!0),eD("live")}catch(e){U((null==e?void 0:e.message)||String(e))}finally{D(!1)}},[tj,tN]=(0,n.useState)(0),[tf,tv]=(0,n.useState)(""),tk=async(e,t)=>{let s=await fetch("https://mainnet.megaeth.com/rpc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:e,params:t})}),a=await s.json();if(a.error)throw Error(a.error.message||"RPC error");return a.result},tC=async e=>{try{tv("Syncing from browser...");let t="0x7b8df4195eda5b193304eecb5107de18b6557d24",s=await tk("eth_blockNumber",[]),a=parseInt(s,16),r=Math.max(e+1,5721028);if(r>=a)return tv("Up to date"),null;tv("Browser sync: blocks ".concat(r.toLocaleString()," to ").concat(a.toLocaleString(),"..."));let l=(await tk("eth_getLogs",[{fromBlock:"0x"+r.toString(16),toBlock:"0x"+a.toString(16),address:"0xfafddbb3fc7688494971a79cc65dca3ef82079e7",topics:["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"]}])||[]).filter(e=>{var s,a;let r=null===(s=e.topics[1])||void 0===s?void 0:s.slice(-40).toLowerCase(),l=null===(a=e.topics[2])||void 0===a?void 0:a.slice(-40).toLowerCase();return r===t.slice(2)||l===t.slice(2)});if(0===l.length)return tv("No new transfers"),null;let n=BigInt(0);for(let e of l)n+=BigInt(e.data);tv("Saving ".concat(l.length," transfers to server..."));try{let e=await fetch("/api/usdm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logs:l,toBlock:a})}),t=await e.json();if(t.ok&&t.saved)return tv("Synced! +".concat(l.length," transfers (saved)")),{totalVolume:t.totalVolume,logs:l.length,toBlock:a,saved:!0}}catch(e){console.warn("Failed to save to server:",e)}return tv("Found ".concat(l.length," new transfers (+$").concat(Math.round(Number(n)/1e18),")")),{newVolume:n.toString(),logs:l.length,toBlock:a}}catch(e){return console.error("Client sync error:",e),tv("Browser sync failed: ".concat((null==e?void 0:e.message)||"Unknown")),null}},tS=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],!eg&&(e||!(em.length>0)||!eb)){eu(!0),ey(null);try{var t,s,a,r;let l=await fetch(e?"/api/usdm?fresh=1":"/api/usdm");if(!l.ok)throw Error("HTTP ".concat(l.status,": ").concat(l.statusText));let n=await l.json();if(!n.ok)throw Error(n.error||"Unknown error");eh(n.rows||[]),eN(n.volumeSeries||[]),ev(n.totalVolume||"0"),ew(n.updatedAt||null),ey(null);let i=null===(t=n.source)||void 0===t?void 0:t.includes("fallback"),o=(null===(s=n.warning)||void 0===s?void 0:s.includes("429"))||(null===(a=n.warning)||void 0===a?void 0:a.toLowerCase().includes("upstream"));if(i&&o&&n.lastBlock){let e=await tC(n.lastBlock);if(e){if(e.saved&&e.totalVolume)ev(e.totalVolume);else if(e.newVolume){let t=BigInt(n.totalVolume||"0")+BigInt(e.newVolume);ev(t.toString())}ew(Date.now()),tN(Date.now()),setTimeout(()=>tS(!1,!1),1e3);return}}if(n.debug||n.syncedTo){let e=n.latestBlock&&n.syncedTo?n.latestBlock-n.syncedTo:0;if(e>100){let t=n.latestBlock?Math.round(n.syncedTo/n.latestBlock*100):100;tv("Syncing... ".concat(t,"% (").concat(e.toLocaleString()," blocks left)"))}else(null===(r=n.debug)||void 0===r?void 0:r.logsFound)>0?tv("Synced! +".concat(n.debug.logsFound," transfers")):tv("Up to date")}else i&&o&&tv("Server busy, will try browser sync...");let c=n.latestBlock&&n.syncedTo?n.latestBlock-n.syncedTo:0;n.needsMoreSync||c>100||i&&o?o?setTimeout(()=>tS(!0,!0),15e3):setTimeout(()=>tS(!0,!0),2e3):(tN(Date.now()),tv(""))}catch(t){let e=(null==t?void 0:t.message)||String(t);e.includes("429")||e.toLowerCase().includes("upstream")?(tv("RPC busy, retrying in 15s..."),setTimeout(()=>tS(!0,!0),15e3)):eb&&Date.now()-eb<3e5||ey(e)}finally{eu(!1)}}},tM=(e,t)=>{let s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=e,r.click(),URL.revokeObjectURL(a)},tT=e=>{if(!e)return null;try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return e}},tL=(e,t)=>"https://megaeth.blockscout.com/tx/".concat(e,"?tab=logs"),tP=(e,t)=>{let s=(null==t?void 0:t.map(e=>e.key))||(e[0]?Object.keys(e[0]):[]);return[((null==t?void 0:t.map(e=>e.label))||s).join(","),...e.map(e=>s.map(t=>{let s=e[t],a=null==s?"":String(s),r='"'+a.replace(/"/g,'""')+'"';return/[",\n]/.test(a)?r:a}).join(","))].join("\n")},tD=(e,t,s)=>{let a=new Blob([tP(t,s)],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-gray-100",children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Showdown Meta Tracker"})}),(0,a.jsxs)("div",{className:"mx-auto max-w-4xl px-4 py-10",children:[(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-[#1a1a1a] text-gray-500 px-4 py-2 text-xs border border-gray-800",children:["vibecoded by"," ",(0,a.jsx)("a",{className:"text-gray-400 hover:text-gray-300",href:"https://x.com/fisiroky",target:"_blank",rel:"noreferrer",children:"@fisiroky"}),(0,a.jsx)("span",{className:"mx-2 text-gray-600",children:"|"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Track the meta, find your edge."})," ",(0,a.jsx)("span",{className:"text-gray-500",children:"Built on fully transparent onchain MegaETH data."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"/images/showdown_small.jpg",alt:"Showdown logo",className:"h-10 w-10 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.E.h1,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},className:"text-2xl font-bold tracking-wide text-red-500 uppercase",children:"Showdown"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-widest",children:"Meta Tracker"})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("a",{href:"https://alpha.showdown.game/",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-500 text-white px-5 py-2.5 text-sm font-bold uppercase tracking-wide transition-colors",children:"Play Now"})})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-5 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-[#141414] p-5 lg:sticky lg:top-4 z-20 border border-gray-800/60",children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400 mb-4",children:"Filters"}),(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"Player Name"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:C,onChange:e=>{T(e.target.value),$(!0)},onFocus:()=>{z(!0),$(!0)},onBlur:()=>{z(!1),setTimeout(()=>$(!1),150)},placeholder:"Enter player name"}),V&&Y&&ee.length>0&&(0,a.jsxs)("div",{className:"absolute z-30 mt-1 w-full max-h-48 overflow-y-auto rounded-lg border border-gray-700/60 bg-[#1c1c1c] shadow-xl",children:[ee.filter(e=>e.toLowerCase().includes(C.toLowerCase())).slice(0,10).map(e=>(0,a.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-gray-300 hover:bg-[#282828] first:rounded-t-lg last:rounded-b-lg",onMouseDown:()=>{T(e),$(!1)},children:e},e)),0===ee.filter(e=>e.toLowerCase().includes(C.toLowerCase())).length&&(0,a.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No matching players"})]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"Start date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"YYYY-MM-DD",className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 pl-8 pr-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:t,onChange:e=>s(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] text-gray-400 mb-1",children:"End date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-500"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",placeholder:"Latest",className:"w-full rounded-lg bg-[#1c1c1c] border border-gray-700/60 pl-8 pr-3 py-2.5 text-sm text-gray-100 placeholder-gray-500 focus:border-gray-600 focus:outline-none",value:r,onChange:e=>j(e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-[11px] text-gray-500 mr-1",children:"Presets:"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tp("sincePatch"),children:"Since last patch"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tp("thisMonth"),children:"This month"}),(0,a.jsx)("button",{className:"rounded-full bg-[#1c1c1c] border border-gray-700/60 px-2.5 py-1 text-[11px] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",onClick:()=>tp("allTime"),children:"All time"})]}),(0,a.jsxs)("button",{onClick:()=>ty(),disabled:P,className:"mt-5 w-full inline-flex items-center justify-center gap-2 bg-red-600 hover:bg-red-500 rounded-lg px-4 py-3 text-sm text-white font-semibold uppercase tracking-wide transition-colors disabled:opacity-50",children:[P?(0,a.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(x.Z,{className:"h-4 w-4"}),P?"Loading...":"Analyze"]}),(0,a.jsxs)("button",{onClick:()=>tw(),disabled:P||0===R.length,className:"mt-2 w-full inline-flex items-center justify-center gap-2 bg-[#1c1c1c] hover:bg-[#282828] rounded-lg px-4 py-2.5 text-sm text-gray-400 hover:text-white transition-colors disabled:opacity-40",children:[P?(0,a.jsx)(d.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Refresh"]}),R.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["cached"===eP&&"Showing cached data through ".concat(eB,". Fetching today now…"),"live"===eP&&"Updated with today’s matches. Cached through ".concat(eB,"."),"idle"===eP&&"Showing cached data through ".concat(eB,".")]}),_&&(0,a.jsx)("div",{className:"rounded-lg bg-red-900/20 border border-red-800/50 p-3 text-xs text-red-400",children:_}),A&&!_&&(0,a.jsx)("div",{className:"rounded-lg bg-amber-900/20 border border-amber-800/50 p-3 text-xs text-amber-400",children:A}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"text-[11px] text-gray-400 mb-2",children:"Player Experience"}),(0,a.jsxs)("div",{className:"flex gap-1.5",children:[(0,a.jsx)("button",{onClick:()=>I("all"),className:"flex-1 rounded-lg px-2.5 py-1.5 text-[11px] transition-colors ".concat("all"===F?"bg-gray-700 text-white":"bg-[#1c1c1c] text-gray-400 hover:bg-[#282828] hover:text-white"),children:"All"}),(0,a.jsx)("button",{onClick:()=>I("pro"),className:"flex-1 rounded-lg px-2.5 py-1.5 text-[11px] transition-colors ".concat("pro"===F?"bg-gray-700 text-white":"bg-[#1c1c1c] text-gray-400 hover:bg-[#282828] hover:text-white"),children:"Pro (30+)"}),(0,a.jsx)("button",{onClick:()=>I("newbie"),className:"flex-1 rounded-lg px-2.5 py-1.5 text-[11px] transition-colors ".concat("newbie"===F?"bg-gray-700 text-white":"bg-[#1c1c1c] text-gray-400 hover:bg-[#282828] hover:text-white"),children:"Newbie (<30)"})]}),(0,a.jsxs)("div",{className:"mt-1 text-[10px] text-gray-500",children:["all"===F&&"Showing all games","pro"===F&&"Only games where both players have 30+ total games","newbie"===F&&"Games with at least one player under 30 total games"]})]})]}),(0,a.jsxs)("div",{id:"top-usdm-profits",className:"rounded-lg bg-[#141414] p-5 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400",children:"Top Earners"}),(0,a.jsx)("div",{className:"text-[10px] text-gray-500 mt-1",children:eb&&(()=>{let e=Math.floor((Date.now()-eb)/6e4),t=Math.floor(e/60),s=t>0?"".concat(t,"h ").concat(e%60,"m ago"):e>0?"".concat(e,"m ago"):"just now",r=e>30;return(0,a.jsxs)("span",{className:r?"text-amber-500":"",children:[new Date(eb).toLocaleString()," (",s,")"]})})()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-widest text-gray-400",children:"Total Wagered"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-500 mt-0.5",children:k(ef)})]})]}),(0,a.jsxs)("button",{onClick:()=>tS(!0),disabled:eg,className:"w-full mb-2 inline-flex items-center justify-center gap-2 bg-red-600/80 hover:bg-red-600 rounded-lg px-3 py-2 text-xs text-white font-medium transition-colors disabled:opacity-40",children:[eg?(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5 animate-spin"}):(0,a.jsx)(m.Z,{className:"h-3.5 w-3.5"}),eg?"Syncing...":"Refresh"]}),tf&&!ep&&(0,a.jsx)("div",{className:"mb-2 text-xs text-yellow-500/80",children:tf}),ep&&(0,a.jsx)("div",{className:"mb-3 rounded-lg p-2.5 text-xs ".concat(0===em.length?"bg-red-900/20 border border-red-800/50 text-red-400":"bg-amber-900/20 border border-amber-800/50 text-amber-400"),children:ep}),(0,a.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-800/50",children:(0,a.jsx)("div",{children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs",children:[(0,a.jsx)("thead",{className:"sticky top-0 bg-[#1c1c1c]",children:(0,a.jsxs)("tr",{className:"text-gray-400 text-[10px] uppercase tracking-wide",children:[(0,a.jsx)("th",{className:"px-3 py-2.5 w-10 text-center",children:"#"}),(0,a.jsx)("th",{className:"px-3 py-2.5",children:"Player"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-green-500",children:"Profit"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-right",children:"Games"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-800/50",children:[em.map((e,t)=>{let s=BigInt(e.net||"0"),r=Number((s<0n?-s:s)/0xde0b6b3a7640000n);return(0,a.jsxs)("tr",{className:"hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"px-3 py-2.5 text-center text-gray-500",children:t+1}),(0,a.jsx)("td",{className:"px-3 py-2.5 font-mono text-[11px]",children:(0,a.jsx)("a",{className:"text-gray-300 hover:text-white",href:"https://megaeth.blockscout.com/address/".concat(e.player),target:"_blank",rel:"noreferrer",children:function(e){if(!e)return"";let t=e.trim();return t.length<=10?t:"".concat(t.slice(0,6),"…").concat(t.slice(-4))}(e.player)})}),(0,a.jsx)("td",{className:"px-3 py-2.5 tabular-nums ".concat(s>0n?r>=100?"text-green-400 font-bold":r>=10?"text-green-400 font-semibold":"text-green-400":s<0n?"text-red-400/70":"text-gray-400"),children:k(e.net,!0)}),(0,a.jsx)("td",{className:"px-3 py-2.5 text-right text-gray-500",children:e.txs})]},e.player+t)}),eg&&0===em.length&&(0,a.jsx)(M,{rows:5,cols:4}),!eg&&0===em.length&&!ep&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-3 py-6 text-center text-gray-500",colSpan:4,children:"No data yet"})})]})]})})}),(0,a.jsx)("a",{className:"mt-3 inline-block text-[10px] text-gray-500 hover:text-gray-300 transition-colors",href:"https://megaeth.blockscout.com/address/0x7B8DF4195eda5b193304eeCB5107DE18b6557D24?tab=txs",target:"_blank",rel:"noreferrer",children:"View contract →"})]})]}),(0,a.jsx)("div",{className:"mt-6 rounded-lg bg-[#141414] p-5 border border-gray-800/60",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Wins"}),P&&0===eE.wins?(0,a.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-green-400",children:eE.wins})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Losses"}),P&&0===eE.losses?(0,a.jsx)("div",{className:"mt-1 h-8 w-16 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsx)("div",{className:"mt-1 text-2xl font-bold text-red-400",children:eE.losses})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Win Rate"}),P&&0===eE.wins&&0===eE.losses?(0,a.jsx)("div",{className:"mt-1 h-8 w-20 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsxs)("div",{className:"mt-1 text-2xl font-bold text-gray-100",children:[(100*eE.winrate).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center p-3 rounded-lg bg-[#1c1c1c]",children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-400",children:"Top Class"}),P&&!eE.dominantClass?(0,a.jsx)("div",{className:"mt-1 h-6 w-24 mx-auto bg-gray-700 rounded animate-pulse"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-1 text-sm font-semibold truncate text-gray-100",children:eE.dominantClass||"—"}),eE.dominantClass&&(0,a.jsxs)("div",{className:"text-[10px] text-gray-500",children:[Math.round(100*(eE.dominantClassPct||0)),"% of wins"]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsx)("div",{className:"text-[11px] font-semibold uppercase tracking-widest text-gray-400 mb-3",children:"Jump to"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,a.jsx)("a",{href:"#player-class-stats",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Player stats"}),(0,a.jsx)("a",{href:"#class-vs-class",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Class vs Class"}),(0,a.jsx)("a",{href:"#player-matches",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Matches"}),(0,a.jsx)("a",{href:"#global-class-stats",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Global stats"}),(0,a.jsx)("a",{href:"#top-players",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Top players"}),(0,a.jsx)("a",{href:"#top-by-class",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"Best by class"}),(0,a.jsx)("a",{href:"#all-decoded",className:"px-3 py-1.5 rounded bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:text-white transition-colors",children:"All games"}),(0,a.jsx)("a",{href:"#top-usdm-profits",className:"px-3 py-1.5 rounded bg-red-900/30 text-red-400 hover:bg-red-900/50 hover:text-red-300 border border-red-800/50 transition-colors",children:"Top Earners"})]})]}),(0,a.jsxs)("details",{id:"player-section",className:"mt-6",open:!0,children:[(0,a.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-widest font-bold text-gray-400",children:[(0,a.jsx)("span",{children:"Player Analysis"}),(0,a.jsx)("span",{className:"h-px flex-1 bg-gray-800"}),(0,a.jsx)("span",{className:"text-[11px] normal-case font-normal text-red-500",children:C||"select player"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{id:"player-class-stats",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Class Performance — ",(0,a.jsx)("span",{className:"text-red-500",children:C||"—"})]}),te.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tM("showdown_class_stats_"+(C||"player")+".json",te),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-3.5 w-3.5"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tD("showdown_class_stats_"+(C||"player")+".csv",te),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-3.5 w-3.5"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-[#1c1c1c]","aria-sort":"klass"===e1.key?"asc"===e1.dir?"ascending":"descending":"none",onClick:()=>e2(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===e1.key?"asc"===e1.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===e1.key?"asc"===e1.dir?"ascending":"descending":"none",onClick:()=>e2(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===e1.key?"asc"===e1.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===e1.key?"asc"===e1.dir?"ascending":"descending":"none",onClick:()=>e2(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===e1.key?"asc"===e1.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===e1.key?"asc"===e1.dir?"ascending":"descending":"none",onClick:()=>e2(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===e1.key?"asc"===e1.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===e1.key?"asc"===e1.dir?"ascending":"descending":"none",onClick:()=>e2(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===e1.key?"asc"===e1.dir?"↑":"↓":""]})]})}),(0,a.jsxs)("tbody",{children:[te.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 sticky left-0 bg-[#141414]",children:e.klass}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,a.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(tc,{data:to.get(e.klass)||[]})})]})]},e.klass+t)),P&&0===te.length&&(0,a.jsx)(M,{rows:6,cols:5}),0===te.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class stats yet — run a query above."})})]})]})})]}),(0,a.jsxs)("div",{id:"class-vs-class",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-200",children:"Class vs Class — Win Rates"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:O,onChange:e=>Z(e.target.checked)}),"Only matches incl. ",(0,a.jsx)("span",{className:"font-semibold",children:C||"player"})]})]}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-gray-500",children:"Shows all matches by default; toggle to limit to matches including the selected player."}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Select 2 classes to form a dual-class"}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:["Bureaucrat","Cheater","Gambler","Inventor","Protector","Rebel"].map(e=>{let t=H.includes(e);return(0,a.jsx)("button",{onClick:()=>th(e),className:"px-2 py-2 sm:px-4 rounded-lg text-xs sm:text-sm font-medium transition-all ".concat(t?"bg-red-600 text-white shadow-md ring-2 ring-red-400":"bg-[#1c1c1c] text-gray-300 hover:bg-[#282828] hover:scale-105"),children:e},e)})}),1===H.length&&(0,a.jsx)("div",{className:"mt-2 text-xs text-amber-400",children:"Select one more class to see matchups"})]}),tm&&tx.matchups[tm]&&(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>J(e=>({key:"opponent",dir:"opponent"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Opponent ","opponent"===W.key?"asc"===W.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>J(e=>({key:"winRate",dir:"winRate"===e.key&&"desc"===e.dir?"asc":"desc"})),children:[(0,a.jsx)("span",{className:"font-bold text-blue-400",children:tm})," WR ","winRate"===W.key?"asc"===W.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>J(e=>({key:"wins",dir:"wins"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Wins ","wins"===W.key?"asc"===W.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>J(e=>({key:"losses",dir:"losses"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Losses ","losses"===W.key?"asc"===W.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 text-center cursor-pointer hover:bg-[#282828] transition-colors",onClick:()=>J(e=>({key:"total",dir:"total"===e.key&&"desc"===e.dir?"asc":"desc"})),children:["Games ","total"===W.key?"asc"===W.dir?"↑":"↓":""]})]})}),(0,a.jsx)("tbody",{children:0===tx.matchups[tm].length?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{className:"p-4 text-center text-gray-500",colSpan:5,children:["No matchup data for ",tm,"."]})}):[...tx.matchups[tm]].sort((e,t)=>{let s="asc"===W.dir?1:-1;return"opponent"===W.key?s*e.opponent.localeCompare(t.opponent):"winRate"===W.key?s*(e.winRate-t.winRate):"wins"===W.key?s*(e.wins-t.wins):"losses"===W.key?s*(e.losses-t.losses):s*(e.total-t.total)}).map(e=>{let t=Math.round(120*e.winRate);return(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:e.opponent}),(0,a.jsx)("td",{className:"p-2 text-center",children:(0,a.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(t,", 60%, 45%)")},children:[(100*e.winRate).toFixed(0),"%"]})}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums text-green-400",children:e.wins}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums text-red-400",children:e.losses}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total})]},e.opponent)})})]})})}),tm&&!tx.matchups[tm]&&tx.classes.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-lg border-gray-700",children:["No data found for ",(0,a.jsx)("span",{className:"font-semibold",children:tm})," in the current dataset"]}),!tm&&tx.classes.length>0&&(0,a.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm border border-dashed rounded-lg border-gray-700",children:"Select 2 classes above to see matchup win rates"}),0===tx.classes.length&&(0,a.jsx)("div",{className:"mt-4 p-4 text-center text-gray-500 text-sm",children:P?"Loading...":"No dual-class data yet — run a query above."})]}),(0,a.jsxs)("div",{id:"player-matches",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Matches — ",(0,a.jsx)("span",{className:"text-red-500",children:C||"—"}),(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",eO.length,")"]})]}),eO.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tM("showdown_matches_for_"+(C||"player")+".json",eO),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tD("showdown_matches_for_"+(C||"player")+".csv",eO),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===eX.key?"asc"===eX.dir?"ascending":"descending":"none",onClick:()=>eK(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===eX.key?"asc"===eX.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-20 cursor-pointer","aria-sort":"result"===eX.key?"asc"===eX.dir?"ascending":"descending":"none",onClick:()=>eK(e=>({key:"result",dir:"result"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Result ","result"===eX.key?"asc"===eX.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eK(e=>({key:"opponent",dir:"opponent"==e.key&&"asc"===e.dir?"desc":"asc"})),children:"Opponent"}),(0,a.jsx)("th",{className:"p-2 w-44",children:"Player class"}),(0,a.jsx)("th",{className:"p-2 w-44",children:"Opponent class"}),(0,a.jsx)("th",{className:"p-2 w-24",children:"Duration"}),(0,a.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===eX.key?"asc"===eX.dir?"ascending":"descending":"none",onClick:()=>eK(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===eX.key?"asc"===eX.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,a.jsxs)("tbody",{children:[e8.map((e,t)=>(tT(e.metadata),(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors cursor-pointer",onClick:()=>e7(e.txHash),children:[(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,a.jsx)("td",{className:"p-2 font-medium",children:e.result}),(0,a.jsx)("td",{className:"p-2",children:e.opponent}),(0,a.jsx)("td",{className:"p-2",children:e.playerClasses}),(0,a.jsx)("td",{className:"p-2",children:e.opponentClasses}),(0,a.jsx)("td",{className:"p-2",children:e.gameLength||"—"}),(0,a.jsx)("td",{className:"p-2",children:e.startedAt}),(0,a.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("a",{className:"text-blue-600 underline",href:tL(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,a.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>e6(e.txHash),children:q===e.txHash?(0,a.jsx)(g.Z,{className:"h-3 w-3"}):(0,a.jsx)(u.Z,{className:"h-3 w-3"})})]})]}),es.has(e.txHash)&&(0,a.jsx)("tr",{className:"border-b border-gray-700 bg-[#1a1a1a]",children:(0,a.jsx)("td",{colSpan:8,className:"p-3 text-xs",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Player class:"})," ",e.playerClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Opponent class:"})," ",e.opponentClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength||"—"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+t))),0===eO.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:8,children:P?(0,a.jsx)(M,{rows:8,cols:7}):"No matches for this player in range ".concat(td," yet.")})})]})]})}),eO.length>eG&&(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eH(e=>Math.max(1,e-1)),disabled:1===eI,children:"Prev"}),(0,a.jsxs)("div",{children:["Page ",eI," / ",Math.ceil(eO.length/eG)]}),(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eH(e=>Math.min(Math.ceil(eO.length/eG),e+1)),disabled:eI>=Math.ceil(eO.length/eG),children:"Next"}),(0,a.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",value:eG,onChange:e=>eW(Number(e.target.value)),children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:15,children:"15"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]}),(0,a.jsx)("input",{value:e$,onChange:e=>eY(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(e$||"1",10);isNaN(e)||eH(Math.min(Math.max(1,e),Math.ceil(eO.length/eG)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",placeholder:"Go"})]})]})]})]}),(0,a.jsxs)("details",{id:"global-section",className:"mt-10",open:!0,children:[(0,a.jsxs)("summary",{className:"flex items-center gap-3 cursor-pointer list-none text-xs uppercase tracking-widest font-bold text-gray-400",children:[(0,a.jsx)("span",{children:"Global Meta"}),(0,a.jsx)("span",{className:"h-px flex-1 bg-gray-800"}),(0,a.jsx)("span",{className:"text-[11px] normal-case font-normal text-gray-500",children:td})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{id:"global-class-stats",className:"rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Class Performance — All Matches",(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",td,")"]})]}),tt.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tM("showdown_class_stats_all.json",tt),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tD("showdown_class_stats_all.csv",tt),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-1 text-[10px] text-gray-500",children:eo?"Aggregates last updated ".concat(new Date(eo).toLocaleString()):""}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-52 cursor-pointer sticky left-0 bg-[#1c1c1c]","aria-sort":"klass"===eQ.key?"asc"===eQ.dir?"ascending":"descending":"none",onClick:()=>e0(e=>({key:"klass",dir:"klass"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Class ","klass"===eQ.key?"asc"===eQ.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"wins"===eQ.key?"asc"===eQ.dir?"ascending":"descending":"none",onClick:()=>e0(e=>({key:"wins",dir:"wins"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Wins ","wins"===eQ.key?"asc"===eQ.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"losses"===eQ.key?"asc"===eQ.dir?"ascending":"descending":"none",onClick:()=>e0(e=>({key:"losses",dir:"losses"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Losses ","losses"===eQ.key?"asc"===eQ.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"total"===eQ.key?"asc"===eQ.dir?"ascending":"descending":"none",onClick:()=>e0(e=>({key:"total",dir:"total"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Games ","total"===eQ.key?"asc"===eQ.dir?"↑":"↓":""]}),(0,a.jsxs)("th",{className:"p-2 w-28 cursor-pointer","aria-sort":"winrate"===eQ.key?"asc"===eQ.dir?"ascending":"descending":"none",onClick:()=>e0(e=>({key:"winrate",dir:"winrate"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Win Rate ","winrate"===eQ.key?"asc"===eQ.dir?"↑":"↓":""]})]})}),(0,a.jsxs)("tbody",{children:[tt.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 sticky left-0 bg-[#141414]",children:e.klass}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,a.jsxs)("td",{className:"p-2 tabular-nums flex items-center gap-2",children:[(100*e.winrate).toFixed(1),"% ",(0,a.jsx)("span",{className:"text-gray-400",children:(0,a.jsx)(tc,{data:tn.get(e.klass)||[]})})]})]},e.klass+t)),P&&0===tt.length&&(0,a.jsx)(M,{rows:6,cols:5}),0===tt.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No data yet — run a query above."})})]})]})})]}),(0,a.jsxs)("div",{id:"top-players",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Top Players",(0,a.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(min 30 games)"})]}),tg.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tM("showdown_top_players.json",tg),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tD("showdown_top_players.csv",tg),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsx)("th",{className:"p-2 w-10",children:"#"}),(0,a.jsx)("th",{className:"p-2",children:"Player"}),(0,a.jsx)("th",{className:"p-2",children:"Wins"}),(0,a.jsx)("th",{className:"p-2",children:"Losses"}),(0,a.jsx)("th",{className:"p-2",children:"Games"}),(0,a.jsx)("th",{className:"p-2",children:"Win Rate"})]})}),(0,a.jsxs)("tbody",{children:[tg.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 tabular-nums",children:t+1}),(0,a.jsx)("td",{className:"p-2",children:e.player}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.wins}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.losses}),(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.total}),(0,a.jsxs)("td",{className:"p-2 tabular-nums",children:[(100*e.winrate).toFixed(1),"%"]})]},e.player+t)),P&&0===tg.length&&(0,a.jsx)(M,{rows:5,cols:6}),!P&&0===tg.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:6,children:"No players meet the 30‑game threshold yet."})})]})]})})]}),(0,a.jsxs)("div",{id:"top-by-class",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["Best Player by Class",(0,a.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(min 20 games)"})]}),tu.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("button",{onClick:()=>tM("showdown_top_by_class.json",tu),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," JSON"]})})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsx)("th",{className:"p-2",children:"Class"}),(0,a.jsx)("th",{className:"p-2",children:"Best Player"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"W/L"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"Games"}),(0,a.jsx)("th",{className:"p-2 text-center",children:"Win Rate"})]})}),(0,a.jsxs)("tbody",{children:[tu.map(e=>{let t=Math.round(120*e.winrate);return(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors",children:[(0,a.jsx)("td",{className:"p-2 font-medium",children:e.klass}),(0,a.jsx)("td",{className:"p-2",children:e.player}),(0,a.jsxs)("td",{className:"p-2 text-center tabular-nums",children:[(0,a.jsx)("span",{className:"text-green-400",children:e.wins}),(0,a.jsx)("span",{className:"text-gray-400 mx-1",children:"/"}),(0,a.jsx)("span",{className:"text-red-400",children:e.losses})]}),(0,a.jsx)("td",{className:"p-2 text-center tabular-nums",children:e.total}),(0,a.jsx)("td",{className:"p-2 text-center",children:(0,a.jsxs)("span",{className:"inline-block rounded-full px-2 py-0.5 text-xs text-white font-medium",style:{backgroundColor:"hsl(".concat(t,", 60%, 45%)")},children:[(100*e.winrate).toFixed(0),"%"]})})]},e.klass)}),P&&0===tu.length&&(0,a.jsx)(M,{rows:5,cols:5}),!P&&0===tu.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:5,children:"No class data available yet."})})]})]})})]}),(0,a.jsxs)("div",{id:"all-decoded",className:"mt-6 rounded-lg bg-[#141414] p-4 border border-gray-800/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-gray-200",children:["All Games",(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(",R.length,")"]})]}),R.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>tM("showdown_winrate_results.json",R),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," JSON"]}),(0,a.jsxs)("button",{onClick:()=>tD("showdown_winrate_results.csv",R),className:"inline-flex items-center gap-1.5 rounded-lg bg-[#1c1c1c] border border-gray-700/60 px-3 py-1.5 text-xs text-gray-300 hover:bg-[#282828] transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"})," CSV"]})]})]}),(0,a.jsx)("div",{className:"mt-3 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left text-xs md:text-sm",children:[(0,a.jsx)("thead",{className:"sticky top-0 z-10",children:(0,a.jsxs)("tr",{className:"border-b border-gray-700 bg-[#1c1c1c]",children:[(0,a.jsxs)("th",{className:"p-2 w-24 cursor-pointer","aria-sort":"gameNumber"===ez.key?"asc"===ez.dir?"ascending":"descending":"none",onClick:()=>eq(e=>({key:"gameNumber",dir:"gameNumber"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Game # ","gameNumber"===ez.key?"asc"===ez.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40",children:"Game ID"}),(0,a.jsxs)("th",{className:"p-2 w-40 whitespace-nowrap cursor-pointer","aria-sort":"startedAt"===ez.key?"asc"===ez.dir?"ascending":"descending":"none",onClick:()=>eq(e=>({key:"startedAt",dir:"startedAt"===e.key&&"asc"===e.dir?"desc":"asc"})),children:["Started ","startedAt"===ez.key?"asc"===ez.dir?"↑":"↓":""]}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eq(e=>({key:"winningPlayer",dir:"winningPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Winner"}),(0,a.jsx)("th",{className:"p-2 w-40 cursor-pointer",onClick:()=>eq(e=>({key:"losingPlayer",dir:"losingPlayer"===e.key&&"asc"===e.dir?"desc":"asc"})),children:"Loser"}),(0,a.jsx)("th",{className:"p-2 w-36",children:"Reason"}),(0,a.jsx)("th",{className:"p-2 w-16",children:"Tx"})]})}),(0,a.jsxs)("tbody",{children:[e5.map((e,t)=>(tT(e.metadata),(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"border-b border-gray-800 hover:bg-[#1c1c1c] transition-colors cursor-pointer",onClick:()=>e9(e.txHash),children:[(0,a.jsx)("td",{className:"p-2 tabular-nums",children:e.gameNumber}),(0,a.jsx)("td",{className:"p-2",children:e.gameId}),(0,a.jsx)("td",{className:"p-2",children:e.startedAt}),(0,a.jsx)("td",{className:"p-2 font-medium",children:e.winningPlayer}),(0,a.jsx)("td",{className:"p-2",children:e.losingPlayer}),(0,a.jsx)("td",{className:"p-2",children:e.endReason}),(0,a.jsxs)("td",{className:"p-2 flex items-center gap-2",children:[(0,a.jsx)("a",{className:"text-blue-600 underline",href:tL(e.txHash,e.network),target:"_blank",rel:"noreferrer",children:"tx"}),(0,a.jsx)("button",{className:"rounded border px-1 py-0.5 text-[10px]",title:"Copy tx hash",onClick:()=>e6(e.txHash),children:q===e.txHash?(0,a.jsx)(g.Z,{className:"h-3 w-3"}):(0,a.jsx)(u.Z,{className:"h-3 w-3"})})]})]}),er.has(e.txHash)&&(0,a.jsx)("tr",{className:"border-b border-gray-700 bg-[#1a1a1a]",children:(0,a.jsx)("td",{colSpan:7,className:"p-3 text-xs",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Winning classes:"})," ",e.winningClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Losing classes:"})," ",e.losingClasses]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Length:"})," ",e.gameLength]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Game type:"})," ",e.gameType||"—"]})]})})})]},e.txHash+t))),0===R.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"p-6 text-center text-gray-500",colSpan:7,children:P?(0,a.jsx)(M,{rows:10,cols:7}):"No rows for range ".concat(td,". Pick a different date range and click Compute.")})})]})]})}),R.length>eG&&(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs",children:[(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eF(e=>Math.max(1,e-1)),disabled:1===eZ,children:"Prev"}),(0,a.jsxs)("div",{children:["Page ",eZ," / ",Math.ceil(R.length/eG)]}),(0,a.jsx)("button",{className:"rounded border px-2 py-1",onClick:()=>eF(e=>Math.min(Math.ceil(R.length/eG),e+1)),disabled:eZ>=Math.ceil(R.length/eG),children:"Next"}),(0,a.jsxs)("select",{className:"ml-2 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",value:eG,onChange:e=>eW(Number(e.target.value)),children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:15,children:"15"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]}),(0,a.jsx)("input",{value:eJ,onChange:e=>eV(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseInt(eJ||"1",10);isNaN(e)||eF(Math.min(Math.max(1,e),Math.ceil(R.length/eG)))}},className:"ml-2 w-16 rounded border px-2 py-1 bg-[#1c1c1c] border-gray-700/60",placeholder:"Go"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:"Daily cache on the server makes historical queries instant; today is fetched incrementally."})]}),q&&(0,a.jsxs)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-30 rounded-full bg-gray-100 text-gray-900 px-3 py-1 text-xs shadow",children:["Copied tx: ",q.slice(0,10),"…"]}),(0,a.jsx)(S,{visible:K})]})}function S(e){let{visible:t}=e;return t?(0,a.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-6 right-6 z-20 rounded-full bg-[#1c1c1c] text-white p-3 shadow-lg border border-gray-700/60 hover:bg-[#282828] transition-colors",title:"Back to top",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})}):null}function M(e){let{rows:t,cols:s}=e,r=Array.from({length:t}),l=Array.from({length:s});return(0,a.jsx)(a.Fragment,{children:r.map((e,t)=>(0,a.jsx)("tr",{className:"animate-pulse",children:l.map((e,t)=>(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("div",{className:"h-3 rounded bg-gray-700"})},t))},t))})}}},function(e){e.O(0,[351,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);