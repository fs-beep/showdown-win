"use strict";(()=>{var t={};t.id=895,t.ids=[895],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,a){return a in e?e[a]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,a)):"function"==typeof e&&"default"===a?e:void 0}}})},7497:(t,e,a)=>{a.r(e),a.d(e,{config:()=>c,default:()=>d,routeModule:()=>f});var n={};a.r(n),a.d(n,{default:()=>u});var r=a(1802),s=a(7153),i=a(6249);let o=null;async function l(){let t;let e=await fetch("https://wallet.showdown.game/activity",{headers:{Accept:"text/html"}});if(!e.ok)throw Error(`Activity page returned ${e.status}`);let a=await e.text(),n={};for(let t of a.split("\n")){let e=t.split("|").map(t=>t.trim());for(let t=0;t<e.length;t++)if(/^0x[a-fA-F0-9]{38,42}$/.test(e[t])){let a=e[t-1]||"";!a||/^\d+$/.test(a)||a.startsWith("#")||a.startsWith("Wallet")||(n[e[t].toLowerCase()]=a);break}}let r=/<td[^>]*>\s*(\d+)\s*<\/td>\s*<td[^>]*>\s*([^<]+)\s*<\/td>\s*<td[^>]*>\s*(0x[a-fA-F0-9]{40})\s*<\/td>/gi;for(;null!==(t=r.exec(a));){let e=t[2].trim(),a=t[3].toLowerCase();e&&a&&(n[a]=e)}return n}async function u(t,e){try{if(o&&Date.now()-o.ts<864e5)return e.status(200).json({ok:!0,mapping:o.data,cached:!0,count:Object.keys(o.data).length});let t=await l(),a=Object.keys(t).length;return a>0&&(o={data:t,ts:Date.now()}),e.status(200).json({ok:!0,mapping:t,cached:!1,count:a})}catch(t){if(o)return e.status(200).json({ok:!0,mapping:o.data,cached:!0,stale:!0,count:Object.keys(o.data).length});return e.status(500).json({ok:!1,error:t.message||"Failed to fetch wallet mapping"})}}let d=(0,i.l)(n,"default"),c=(0,i.l)(n,"config"),f=new r.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/wallets",pathname:"/api/wallets",bundlePath:"",filename:""},userland:n})},7153:(t,e)=>{var a;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return a}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(t,e,a)=>{t.exports=a(145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var a=e(e.s=7497);module.exports=a})();